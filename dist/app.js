!function(e){function t(t){for(var a,o,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)o=s[d],i[o]&&p.push(i[o][0]),i[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(u&&u(t);p.length;)p.shift()();return n.push.apply(n,c||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,s=1;s<r.length;s++){var l=r[s];0!==i[l]&&(a=!1)}a&&(n.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},i={2:0},n=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;n.push([405,1,0]),r()}({150:function(e,t,r){"use strict";r.r(t);var a=r(147),i=r(146),n=r(145),o=r(144),s=r(143),l=r(142),c=r(141),u=r(140),d=r(139),p=r(138),f=r(19),m=r.n(f),h=(r(399),r(3)),g=r.n(h),y=r(137),b=r.n(y),v={GATEKEEPER_KEY:"82fe014b6575b8c38b44235580bc8b11",ZONING_CODE_MAP:{"RSD-1":"Residential Single Family Detached-1","RSD-2":"Residential Single Family Detached-2","RSD-3":"Residential Single Family Detached-3","RSA-1":"Residential Single Family Attached-1","RSA-2":"Residential Single Family Attached-2","RSA-3":"Residential Single Family Attached-3","RSA-4":"Residential Single Family Attached-4","RSA-5":"Residential Single Family Attached-5","RTA-1":"Residential Two-Family Attached-1","RM-1":"Residential Multi-Family-1","RM-2":"Residential Multi-Family-2","RM-3":"Residential Multi-Family-3","RM-4":"Residential Multi-Family-4","RMX-1":"Residential Mixed-Use-1","RMX-2":"Residential Mixed-Use-2","RMX-3":"Residential (Center City) Mixed-Use-3","CA-1":"Auto-Oriented Commercial-1","CA-2":"Auto-Oriented Commercial-2","CMX-1":"Neighborhood Commercial Mixed-Use-1","CMX-2":"Neighborhood Commercial Mixed-Use-2","CMX-2.5":"Neighborhood Commercial Mixed-Use-2.5","CMX-3":"Community Commercial Mixed-Use","CMX-4":"Center City Commercial Mixed-Use","CMX-5":"Center City Core Commercial Mixed-Use","I-1":"Light Industrial","I-2":"Medium Industrial","I-3":"Heavy Industrial",IP:"Port Industrial",ICMX:"Industrial Commercial Mixed-Use",IRMX:"Industrial Residential Mixed-Use",SPENT:"Commercial Entertainment (Casinos)",SPAIR:"Airport",SPINS:"Institutional Development",SPSTA:"Stadium",SPPOA:"Recreation","SP-PO-A":"Recreation",SPPOP:"Recreation"},cleanDorAttribute:function(e){var t=e?String(e):"";return t=t.replace(/\s+/g,""),[null,"0"].indexOf(t)>-1?"":t},concatDorAddress:function(e,t){t=!!t;var r=e.properties,a=this.cleanDorAttribute(r.HOUSE),i=this.cleanDorAttribute(r.STEX),n=this.cleanDorAttribute(r.SUF),o=a;o+=i?"-"+i:"",o+=n||"";var s=this.cleanDorAttribute(r.UNIT);s&&(s="# "+s);var l=["STDIR","STNAM","STDES","STDESSUF"].map(function(e){return r[e]});return l=l.map(this.cleanDorAttribute),l=[o].concat(l),t&&(l=l.concat([s])),""===(o=l.filter(Boolean).join(" "))&&(o="Parcel has no address"),o},getVacancyText:function(e){var t=e.sources.vacantLand.data,r=e.sources.vacantBuilding.data;return 0===t.length&&0===r.length?"Not Likely Vacant":t.length>0?"Likely Vacant Land":r.length>0?"Likely Vacant Building":void 0}};m.a.settings.currency.precision=0;var _={bold:{transform:function(e){return"<strong>"+e+"</strong>"}},booleanToYesNo:{transform:function(e){return e?"Yes":"No"}},thousandsPlace:{transform:function(e){return String(e).match(/\d+/)[0].replace(/(.)(?=(\d{3})+$)/g,"$1,")+" "+(String(e).replace(/[0-9]/g,"")||"")}},currency:{globals:["accounting"],transform:function(e,t){return m.a.formatMoney(e)}},date:{globals:["moment"],transform:function(e,t){return g()(e).format("MM/DD/YYYY")}},dayofweek:{transform:function(e){switch(e){case"FRI":e="Friday";break;case"SAT":e="Saturday";break;case"SUN":e="Sunday";break;case"MON":e="Monday";break;case"TUE":e="Tuesday";break;case"WED":e="Wednesday";break;case"THU":e="Thursday"}return e}},feet:{transform:function(e){return e&&e+" ft"}},getNearest:{transform:function(e,t,r){var a=Math.min.apply(null,e.sources[t].data.map(function(e){return e[r]})),i=e.sources[t].data.filter(function(e){return e[r]==a});return i?i[0]:null}},integer:{transform:function(e){return!isNaN(e)&&parseInt(e)}},nowrap:{transform:function(e){return'<span style="white-space: nowrap;">'+e+"</span>"}},nth:{transform:function(e){return e+([,"st","nd","rd"][e%100>>3^1&&e%10]||"th")}},phoneNumber:{transform:function(e){var t=(""+e).replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return t?"("+t[1]+") "+t[2]+"-"+t[3]:null}},prettyNumber:{transform:function(e){return!isNaN(e)&&e.toLocaleString()}},rcoPrimaryContact:{transform:function(e){var t=/\(?(\d{3})\)?( |-)?(\d{3})(-| )?(\d{4})/g.exec(e);if(!t)return e;var r=["(",t[1],") ",t[3],"-",t[5]].join(""),a=t[0];return e.replace(a,r)}},squareFeet:{transform:function(e){return e&&e+" sq ft"}},titleCase:{transform:function(e){return(e=e.toLowerCase().split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")}},urlFormatter:{transform:function(e){var t=["http//","http://","https://","www.","//","//:"].join("|");return e.replace(new RegExp(t,"gi"),"")}}},D={id:"condoList",type:"http-get",url:"//api.phila.gov/ais/v1/search/",options:{params:{urlAddition:function(e){return e.properties.street_address},gatekeeperKey:v.GATEKEEPER_KEY,include_units:!0,opa_only:!0,page:1},success:function(e){return e}}},S={id:"dorDocuments",type:"http-get",targets:{get:function(e){return e.parcels.dor.data},getTargetId:function(e){return e.properties.OBJECTID}},url:"//services.arcgis.com/fLeGjb7u4uXqeF9q/ArcGIS/rest/services/RTT_SUMMARY/FeatureServer/0/query",options:{params:{where:function(e,t){var r=v.concatDorAddress(e),a=t.geocode.data.properties;if(r&&"null"!==r){var i=t.geocode.data.properties,n=i.address_low,o=100*Math.floor(n/100,1),s=n-o,l=i.address_high||n;d="(((ADDRESS_LOW >= "+n+" AND ADDRESS_LOW <= "+l+") OR (ADDRESS_LOW >= "+o+" AND ADDRESS_LOW <= "+l+" AND ADDRESS_HIGH >= "+s+" )) AND STREET_NAME = '"+a.street_name+"' AND STREET_SUFFIX = '"+a.street_suffix+"' AND (MOD(ADDRESS_LOW,2) = MOD( "+n+",2))";""!=a.street_predir&&(d+=" AND STREET_PREDIR = '"+a.street_predir+"'"),""!=a.address_low_suffix&&(d+=" AND ADDRESS_LOW_SUFFIX = '"+a.address_low_suffix+"'"),"1/2"===a.address_low_frac&&(d+=" AND ADDRESS_LOW_SUFFIX = '2'"),""!=a.street_postdir&&(d+=" AND STREET_POSTDIR = '"+a.street_postdir+"'");var c=v.cleanDorAttribute(e.properties.UNIT),u=a.unit_num;c?d+=" AND UNIT_NUM = '"+c+"'":""!==u&&(d+=" AND UNIT_NUM = '"+u+"'"),d+=") or MATCHED_REGMAP = '"+t.parcels.dor.data[0].properties.BASEREG+"'",d+=" or REG_MAP_ID = '"+t.parcels.dor.data[0].properties.BASEREG+"'"}else var d="MATCHED_REGMAP = '"+t.parcels.dor.data[0].properties.BASEREG+"'";return d},outFields:"DOCUMENT_ID, DISPLAY_DATE, DOCUMENT_TYPE, GRANTORS, GRANTEES",returnDistinctValues:"true",returnGeometry:"false",f:"json",sqlFormat:"standard"},success:function(e){return e.features}}},A={id:"regmaps",type:"esri",url:"//services.arcgis.com/fLeGjb7u4uXqeF9q/arcgis/rest/services/MASTERMAPINDEX/FeatureServer/0",deps:["parcels.dor"],options:{relationship:"intersects",targetGeometry:function(e,t){var r=[],a=[];e.parcels.dor.data.forEach(function(e){e.geometry.coordinates.forEach(function(e){e.forEach(function(e){if(Array.isArray(e[0]))e.forEach(function(e){var t=e[0],i=e[1];r.push(t),a.push(i)});else{var t=e[0],i=e[1];r.push(t),a.push(i)}})})});var i=Math.min.apply(null,r),n=Math.max.apply(null,r),o=Math.min.apply(null,a),s=Math.max.apply(null,a);return[i,n,o,s].every(function(e){return e})?t.latLngBounds([[o,i],[s,n]]):null}},success:function(e){return e}},E={key:"condos",icon:"building",label:"Condominiums",dataSources:["condoList"],showTopicBasedOnOtherData:{otherData:{opa:{data:void 0}},requiredData:{condoList:{pathToDataArray:["features"],minDataLength:1}}},showTopicOnlyIfDataExists:{condoList:{pathToDataArray:["features"],minDataLength:2}},components:[{type:"callout",slots:{text:"Condominium units at your search address, as recorded for property assessment purposes. Click one of the addresses below to see information for that unit.  Use the back button to return to this list. Source: Office of Property Assessment"}},{type:"horizontal-table",options:{id:"condoList",useApiCount:!0,defaultIncrement:25,fields:[{label:"Address",value:function(e,t){var r=t.properties.street_address;return'<a href="#/'+r+'/property">'+r+"</a>"}},{label:"OPA Account #",value:function(e,t){return t.properties.opa_account_num}}]},slots:{title:"Condominiums",highestPageRetrieved:function(e){return e.sources.condoList.data.page},pageCount:function(e){return e.sources.condoList.data.page_count},totalSize:function(e){return e.sources.condoList.data.total_size},items:function(e){return e.sources.condoList.data.features.map(function(e){return e})}}}],identifyFeature:"address-marker",parcels:"pwd"},I={key:"deeds",icon:"book",label:"Deeds",dataSources:["dorDocuments"],components:[{type:"callout",slots:{text:"          Deed information and document transactions for this address.          The map faithfully reflects property boundaries as described in           recorded deeds including multiple types of easements.          The property boundaries displayed on the map are for reference           only and should not be used in place of the recorded deeds or           land surveys. Source: Department of Records        "}},{type:"collection-summary",options:{descriptor:"parcel",getValue:function(e){return e.properties.STATUS},context:{singular:function(e){return"There is "+e+" at this address."},plural:function(e){return"There are "+e+" at this address."}},types:[{value:1,label:"active parcel"},{value:2,label:"inactive parcel"},{value:3,label:"remainder parcel"}]},slots:{items:function(e){return e.parcels.dor.data}}},{type:"tab-group",options:{getKey:function(e){return e.properties.OBJECTID},getTitle:function(e){return e.properties.MAPREG},getAddress:function(e){return v.concatDorAddress(e)},components:[{type:"vertical-table",options:{nullValue:"None"},slots:{title:"Parcel Details",fields:[{label:"Map Registry #",value:function(e,t){return t.properties.MAPREG}},{label:"Parcel Address",value:function(e,t){return v.concatDorAddress(t)}},{label:"Status",value:function(e,t){var r;switch(t.properties.STATUS){case 1:r="Active";break;case 2:r="Inactive";break;case 3:r="Remainder"}return r}},{label:"Origination Date",value:function(e,t){return t.properties.ORIG_DATE},transforms:["date"]},{label:"Inactive Date",value:function(e,t){return t.properties.INACTDATE},transforms:["date"]},{label:"Has Air Rights",value:function(e,t){return"A"===t.properties.SUFFIX?"Yes":"No"}},{label:"Is Condo",value:function(e,t){return t.properties.CONDOFLAG?"Yes":"No"}},{label:"Perimeter",value:function(e,t){return(t.properties||{}).TURF_PERIMETER},transforms:["integer","prettyNumber","feet"]},{label:"Area",value:function(e,t){return(t.properties||{}).TURF_AREA},transforms:["integer","prettyNumber","squareFeet"]}]}},{type:"horizontal-table",options:{id:"dorCondoList",defaultIncrement:10,showAllRowsOnFirstClick:!0,showOnlyIfData:!0,fields:[{label:"Condo Parcel",value:function(e,t){return t.recmap+"-"+t.condoparcel}},{label:"Condo Name",value:function(e,t){return t.condo_name}},{label:"Unit #",value:function(e,t){return"Unit #"+t.condounit}}],sort:{getValue:function(e){return e.condounit},order:"asc"}},slots:{title:"Deeded Condominiums",items:function(e,t){var r=t.properties.OBJECTID;return e.sources.dorCondoList.targets[r]?e.sources.dorCondoList.targets[r].data?e.sources.dorCondoList.targets[r].data.rows:void 0:[]}}},{type:"callout",slots:{text:'You can access digital copies of the deeds                 below by purchasing a subscription to                 <a target="_blank" href="http://epay.phila-records.com/phillyepay/web/">PhilaDox <i class="fa fa-external-link"></i></a></a>.                Please note that the following list                shows documents recorded from                December 1999 forward, and may not be a complete history                of title for the parcel.              '}},{type:"horizontal-table",options:{id:"dorDocuments",defaultIncrement:25,fields:[{label:"ID",value:function(e,t){return t.attributes.DOCUMENT_ID}},{label:"Date",value:function(e,t){return t.attributes.DISPLAY_DATE},nullValue:"no date available",transforms:["date"]},{label:"Type",value:function(e,t){return t.attributes.DOCUMENT_TYPE}},{label:"Grantor",value:function(e,t){return t.attributes.GRANTORS}},{label:"Grantee",value:function(e,t){return t.attributes.GRANTEES}}],sort:{getValue:function(e){return e.attributes.DISPLAY_DATE},order:"desc"}},slots:{title:"Documents",items:function(e,t){var r=t.properties.OBJECTID;return e.sources.dorDocuments.targets[r]?e.sources.dorDocuments.targets[r].data:[]}}}]},slots:{items:function(e){return e.parcels.dor.data}}},{type:"callout",slots:{text:"          Use the buttons below to view images of hard-copy deed maps, some          of which have handwritten information that may be useful for          historical deed research.        "}},{type:"overlay-toggle-group",options:{getKey:function(e){return e.properties.RECMAP}},slots:{title:"Registry Maps",items:function(e){return e.sources.regmaps.data}}}],identifyFeature:"dor-parcel",parcels:"dor",imageOverlayGroup:"regmaps"},C={key:"li",icon:"wrench",label:"Licenses & Inspections",dataSources:["liPermits","liInspections","liViolations","liBusinessLicenses","zoningDocs"],components:[{type:"callout",slots:{text:"          Licenses, inspections, permits, property maintenance           violations, and zoning permit documents at your search address.           Source: Department of Licenses & Inspections        "}},{type:"horizontal-table",options:{id:"liPermits",limit:5,fields:[{label:"Date",value:function(e,t){return t.permitissuedate},nullValue:"no date available",transforms:["date"]},{label:"ID",value:function(e,t){return"<a target='_blank' href='http://li.phila.gov/#details?entity=permits&eid="+t.permitnumber+"&key="+t.addresskey+"&address="+t.address+"'>"+t.permitnumber+" <i class='fa fa-external-link'></i></a>"}},{label:"Description",value:function(e,t){return t.permitdescription}},{label:"Status",value:function(e,t){return t.status}}],sort:{getValue:function(e){return e.permitissuedate},order:"desc"},externalLink:{action:function(e){return"See "+e+" older permits at L&I Property History"},name:"L&I Property History",href:function(e){var t=e.geocode.data.properties.street_address;return"http://li.phila.gov/#summary?address="+encodeURIComponent(t)}}},slots:{title:"Permits",items:function(e){return e.sources.liPermits.data.rows.map(function(e){return e})}}},{type:"horizontal-table",options:{topicKey:"zoning",id:"zoningDocs",fields:[{label:"Date",value:function(e,t){return t.scan_date},nullValue:"no date available",transforms:["date"]},{label:"Permit Number",value:function(e,t){return t.permit_number}},{label:"# Pages",value:function(e,t){return t.num_pages}},{label:"ID",value:function(e,t){var r=t.app_id;return r.length<3&&(r="0"+r),'<a target="_blank" href="//s3.amazonaws.com/lni-zoning-pdfs/'+t.doc_id+'.pdf">'+t.doc_id+' <i class="fa fa-external-link"></i></a></a>'}}],sort:{getValue:function(e){return e.scan_date},order:"desc"}},slots:{title:"Zoning Permit Documents",subtitle:'formerly "Zoning Archive"',items:function(e){if(e.sources.zoningDocs.data&&e.sources.zoningDocs.data.rows)return e.sources.zoningDocs.data.rows.map(function(e){return e})}}},{type:"horizontal-table",options:{topicKey:"permits",id:"liInspections",limit:5,fields:[{label:"Date",value:function(e,t){return t.inspectioncompleted},nullValue:"no date available",transforms:["date"]},{label:"ID",value:function(e,t){return"<a target='_blank' href='http://li.phila.gov/#details?entity=violationdetails&eid="+t.casenumber+"&key="+t.addresskey+"&address="+t.address+"'>"+t.casenumber+" <i class='fa fa-external-link'></i></a>"}},{label:"Description",value:function(e,t){return t.inspectiondescription}},{label:"Status",value:function(e,t){return t.inspectionstatus}}],sort:{getValue:function(e){return e.inspectioncompleted},order:"desc"},externalLink:{action:function(e){return"See "+e+" older inspections at L&I Property History"},name:"L&I Property History",href:function(e){var t=e.geocode.data.properties.street_address;return"http://li.phila.gov/#summary?address="+encodeURIComponent(t)}}},slots:{title:"Inspections",items:function(e){return e.sources.liInspections.data.rows.map(function(e){return e})}}},{type:"horizontal-table",options:{id:"liViolations",limit:5,fields:[{label:"Date",value:function(e,t){return t.caseaddeddate},nullValue:"no date available",transforms:["date"]},{label:"ID",value:function(e,t){return"<a target='_blank' href='http://li.phila.gov/#details?entity=violationdetails&eid="+t.casenumber+"&key="+t.addresskey+"&address="+t.address+"'>"+t.casenumber+" <i class='fa fa-external-link'></i></a>"}},{label:"Description",value:function(e,t){return t.violationdescription}},{label:"Status",value:function(e,t){return t.status}}],sort:{getValue:function(e){return e.caseaddeddate},order:"desc"},externalLink:{action:function(e){return"See "+e+" older violations at L&I Property History"},name:"L&I Property History",href:function(e){var t=e.geocode.data.properties.street_address;return"http://li.phila.gov/#summary?address="+encodeURIComponent(t)}}},slots:{title:"Violations",items:function(e){return e.sources.liViolations.data.rows.map(function(e){return e})}}},{type:"horizontal-table",options:{id:"liBusinessLicenses",limit:5,fields:[{label:"Issue Date",value:function(e,t){return t.initialissuedate},transforms:["date"]},{label:"License Number",value:function(e,t){return"<a target='_blank' href='http://li.phila.gov/#details?entity=licenses&eid="+t.licensenum+"&key="+t.street_address+"&address="+t.street_address+"'>"+t.licensenum+" <i class='fa fa-external-link'></i></a>"}},{label:"Name",value:function(e,t){return t.business_name}},{label:"Type",value:function(e,t){return t.licensetype}},{label:"Status",value:function(e,t){return t.licensestatus}}],sort:{getValue:function(e){return e.caseaddeddate},order:"desc"},externalLink:{action:function(e){return"See "+e+" older business licenses at L&I Property History"},name:"L&I Property History",href:function(e){var t=e.geocode.data.properties.street_address;return"http://li.phila.gov/#summary?address="+encodeURIComponent(t)}}},slots:{title:"Business Licenses",items:function(e){return e.sources.liBusinessLicenses.data.rows.map(function(e){return e})}}}],dynamicMapLayers:[],identifyFeature:"address-marker",parcels:"pwd"},w={key:"zoning",icon:"university",label:"Zoning",dataSources:["zoningOverlay","zoningBase","zoningAppeals","rco"],components:[{type:"callout",slots:{text:"Base district zoning maps, associated zoning overlays, and Registered Community Organizations applicable to your search address. Source: Department of Planning and Development"}},{type:"collection-summary",options:{descriptor:"parcel",getValue:function(e){return e.properties.STATUS},context:{singular:function(e){return"There is "+e+" at this address."},plural:function(e){return"There are "+e+" at this address."}},types:[{value:1,label:"active parcel"},{value:2,label:"inactive parcel"},{value:3,label:"remainder parcel"}]},slots:{items:function(e){return e.parcels.dor.data}}},{type:"tab-group",options:{getKey:function(e){return e.properties.OBJECTID},getTitle:function(e){return e.properties.MAPREG},getAddress:function(e){return hf.concatDorAddress(e)},components:[{type:"badge-custom",options:{titleBackground:"#58c04d",components:[{type:"horizontal-table",options:{topicKey:"zoning",shouldShowFilters:!1,shouldShowHeaders:!1,id:"baseZoning",fields:[{label:"Code",value:function(e,t){return t},transforms:["nowrap","bold"]},{label:"Description",value:function(e,t){return v.ZONING_CODE_MAP[t]}}]},slots:{items:function(e,t){var r=t.properties.OBJECTID,a=(e.sources.zoningBase.targets[r]||{}).data,i=(void 0===a?{}:a).rows,n=(void 0===i?[]:i).map(function(e){return e.long_code}),o=new Set(n);return Array.from(o)}}}]},slots:{title:"Base District"}},{type:"horizontal-table",options:{topicKey:"zoning",id:"zoningOverlay",fields:[{label:"Name",value:function(e,t){return t.overlay_name}},{label:"Code Section",value:function(e,t){return"<a target='_blank' href='"+t.code_section_link+"'>"+t.code_section+" <i class='fa fa-external-link'></i></a>"}}]},slots:{title:"Overlays",items:function(e,t){var r=t.properties.OBJECTID;return((e.sources.zoningOverlay.targets[r]||{}).data||{}).rows||[]}}},{type:"horizontal-table",options:{topicKey:"zoning",id:"baseZoning",fields:[{label:"Bill Type",value:function(e,t){return t.billType}},{label:"Current Zoning",value:function(e,t){return t.currentZoning}},{label:"Pending Bill",value:function(e,t){return'<a target="_blank" href="'.concat(t.pendingbillurl,'">').concat(t.pendingbill,' <i class="fa fa-external-link"></i></a>')}}]},slots:{title:"Pending Bills",items:function(e,t){var r=t.properties.OBJECTID,a=((e.sources.zoningBase.targets[r]||{}).data||{}).rows,i=(void 0===a?[]:a).filter(function(e){return"Yes"===e.pending}).map(function(e){return e.billType="Base District",e.currentZoning=e.long_code,e}),n=[];e.sources.zoningOverlay.targets[r]?n=e.sources.zoningOverlay.targets[r].data.rows.filter(function(e){return"Yes"===e.pending}).map(function(e){return e.billType="Overlay",e.currentZoning=e.overlay_name,e}):n=[];return i.concat(n)}}}]},slots:{items:function(e){return e.parcels.dor.data}}},{type:"horizontal-table",options:{id:"zoningAppeals",fields:[{label:"Processed Date",value:function(e,t){return t.processeddate},transforms:["date"]},{label:"ID",value:function(e,t){return"<a target='_blank' href='http://li.phila.gov/#details?entity=appeals&eid="+t.appeal_key+"&key="+t.addresskey+"&address="+t.address+"'>"+t.appealno+"<i class='fa fa-external-link'></i></a>"}},{label:"Description",value:function(e,t){return t.appealgrounds}},{label:"Scheduled Date",value:function(e,t){return t.date_scheduled},transforms:["date"]},{label:"Status",value:function(e,t){return t.decision}}],sort:{getValue:function(e){return e.date_scheduled},order:"desc"}},slots:{title:"Appeals",items:function(e){if(e.sources.zoningAppeals.data&&e.sources.zoningAppeals.data.rows)return e.sources.zoningAppeals.data.rows.map(function(e){return e})}}},{type:"callout",slots:{text:'Looking for zoning documents? They are now located in the Licenses & Inspections tab under "Zoning Permit Documents".'}},{type:"horizontal-table",options:{id:"rco",fields:[{label:"RCO",value:function(e,t){return"<b>"+t.properties.ORGANIZATION_NAME+"</b><br>"+t.properties.ORGANIZATION_ADDRESS}},{label:"Meeting Address",value:function(e,t){return t.properties.MEETING_LOCATION_ADDRESS}},{label:"Primary Contact",value:function(e,t){return t.properties.PRIMARY_NAME+"<br>"+t.properties.PRIMARY_PHONE+"<br>"+t.properties.PRIMARY_EMAIL},transforms:["rcoPrimaryContact"]},{label:"Preferred Method",value:function(e,t){return t.properties.PREFFERED_CONTACT_METHOD}}],externalLink:{forceShow:!0,action:function(){return"See a list of all RCOs in the city [PDF]"},name:"",href:function(e){return"//www.phila.gov/CityPlanning/projectreviews/RCO%20Related/List_of_RCOs.pdf"}}},slots:{title:"Registered Community Organizations",items:function(e){if(e.sources.rco.data)return e.sources.rco.data.map(function(e){return e})}}}],dynamicMapLayers:["zoning"],identifyFeature:"dor-parcel",parcels:"dor"},T={key:"nearby",icon:"map-marker-alt",label:"Nearby",dataSources:["threeOneOneCarto","crimeIncidents","nearbyZoningAppeals"],identifyFeature:"address-marker",parcels:"pwd",components:[{type:"callout",slots:{text:"          See recent activity near your search address including 311           service requests, crimes, zoning appeals, and more. Hover over a          record below to highlight it on the map.        "}},{type:"horizontal-table-group",options:{filters:[{type:"data",getValue:function(e){return e},label:"What nearby activity would you like to see?",values:[{label:"311 Requests",value:"311"},{label:"Crime Incidents",value:"crimeIncidents"},{label:"Zoning Appeals",value:"nearbyZoningAppeals"},{label:"Vacant Properties",value:"vacantIndicatorsPoints"}]}],tables:[{type:"horizontal-table",options:{id:"311",sort:{select:!0,sortFields:["distance","date"],getValue:function(e,t){var r;return"date"!==t&&t?"distance"===t&&(r=e.distance):r=e.requested_datetime,r},order:function(e){return"date"===e?"desc":"asc"}},filters:[{type:"time",getValue:function(e){return e.requested_datetime},label:"From the last",values:[{label:"30 days",value:"30",unit:"days",direction:"subtract"},{label:"90 days",value:"90",unit:"days",direction:"subtract"},{label:"year",value:"1",unit:"years",direction:"subtract"}]}],filterByText:{label:"Filter by text",fields:["service_name","address"]},mapOverlay:{marker:"circle",style:{radius:6,fillColor:"#ff3f3f",color:"#ff0000",weight:1,opacity:1,fillOpacity:1},hoverStyle:{radius:6,fillColor:"yellow",color:"#ff0000",weight:1,opacity:1,fillOpacity:1}},fields:[{label:"Date",value:function(e,t){return t.requested_datetime},nullValue:"no date available",transforms:["date"]},{label:"Address",value:function(e,t){return t.address}},{label:"Subject",value:function(e,t){return t.media_url?'<a target="_blank" href='+t.media_url+">"+t.service_name+"</a>":t.service_name}},{label:"Distance",value:function(e,t){return parseInt(t.distance)+" ft"}}]},slots:{title:"Nearby Service Requests",data:"threeOneOneCarto",items:function(e){return(e.sources.threeOneOneCarto.data||[]).map(function(e){return e})}}},{type:"horizontal-table",options:{id:"crimeIncidents",sort:{select:!0,sortFields:["distance","date"],getValue:function(e,t){var r;return"date"!==t&&t?"distance"===t&&(r=e.distance):r=e.dispatch_date,r},order:function(e){return"date"===e?"desc":"asc"}},filters:[{type:"time",getValue:function(e){return e.dispatch_date},label:"From the last",values:[{label:"30 days",value:"30",unit:"days",direction:"subtract"},{label:"90 days",value:"90",unit:"days",direction:"subtract"}]}],filterByText:{label:"Filter by",fields:["text_general_code"]},mapOverlay:{marker:"circle",style:{radius:6,fillColor:"#6674df",color:"#6674df",weight:1,opacity:1,fillOpacity:1},hoverStyle:{radius:6,fillColor:"yellow",color:"#6674df",weight:1,opacity:1,fillOpacity:1}},fields:[{label:"Date",value:function(e,t){return t.dispatch_date},nullValue:"no date available",transforms:["date"]},{label:"Location",value:function(e,t){return t.location_block}},{label:"Description",value:function(e,t){return t.text_general_code}},{label:"Distance",value:function(e,t){return parseInt(t.distance)+" ft"}}]},slots:{title:"Crime Incidents",data:"crimeIncidents",items:function(e){return(e.sources.crimeIncidents.data||[]).map(function(e){return e})}}},{type:"horizontal-table",options:{id:"nearbyZoningAppeals",sort:{select:!0,sortFields:["distance","date"],getValue:function(e,t){var r;return"date"!==t&&t?"distance"===t&&(r=e.distance):r=e.decisiondate,r},order:function(e){return"date"===e?"desc":"asc"}},filterByText:{label:"Filter by",fields:["appealgrounds"]},mapOverlay:{marker:"circle",style:{radius:6,fillColor:"#009900",color:"#009900",weight:1,opacity:1,fillOpacity:1},hoverStyle:{radius:6,fillColor:"yellow",color:"#009900",weight:1,opacity:1,fillOpacity:1}},fields:[{label:"Date",value:function(e,t){return t.decisiondate},nullValue:"no date available",transforms:["date"]},{label:"Location",value:function(e,t){return t.address}},{label:"Description",value:function(e,t){return t.appealgrounds}},{label:"Distance",value:function(e,t){return parseInt(t.distance)+" ft"}}]},slots:{title:"Zoning Appeals",data:"nearbyZoningAppeals",items:function(e){return(e.sources.nearbyZoningAppeals.data||[]).map(function(e){return e})}}},{type:"horizontal-table",options:{id:"vacantIndicatorsPoints",sort:{select:!0,sortFields:["distance","type"],getValue:function(e,t){var r;return"type"!==t&&t?"distance"===t&&(r=e._distance):r=e.properties.VACANT_FLAG,r}},filterByText:{label:"Filter by",fields:["ADDRESS","VACANT_FLAG"]},mapOverlay:{marker:"circle",style:{radius:6,fillColor:"#9400c6",color:"#9400c6",weight:1,opacity:1,fillOpacity:1},hoverStyle:{radius:6,fillColor:"yellow",color:"#009900",weight:1,opacity:1,fillOpacity:1}},fields:[{label:"Address",value:function(e,t){return t.properties.ADDRESS}},{label:"Property Type",value:function(e,t){return t.properties.VACANT_FLAG}},{label:"Distance",value:function(e,t){return t._distance+" ft"}}],externalLink:{forceShow:!0,action:function(e){return"See more at Vacancy Property Viewer"},name:"Vacancy Property Viewer",href:function(e){return"//phl.maps.arcgis.com/apps/webappviewer/index.html?id=64ac160773d04952bc17ad895cc00680"}}},slots:{title:"Likely Vacant Properties",data:"vacantIndicatorsPoints",items:function(e){return(e.sources.vacantIndicatorsPoints.data||[]).map(function(e){return e})}}}]},slots:{items:function(e){return e.parcel.pwd}}}]},R=function(e){return(e=e.toLowerCase().split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")},O={key:"historic",icon:"scroll-old",label:"Historic",dataSources:["histDesignated","crimeIncidents","histDistrict","historicNearby"],components:[{type:"callout",slots:{text:"Results indicate likely status of historic designation for this property.                Please contact the Historical Commission to verify this result before taking                actions on alterations or other property issues.<br>                Phone: (215) 686-7660 <br> Mon-Fri, 8:30 a.m. to 4:00 p.m."}},{type:"callout",slots:{text:"The Philadelphia Historical Commission identifies and designates historic resources, listing them on                the Philadelphia Register of Historic Places, and inventory that currently includes more than 22,000               properties and 15 historic districts. <br>                Source: Philadelphia Historical Commission, Department of Planning, Streets Department."}},{type:"vertical-table",options:{nullValue:"None",externalLink:{action:function(){return"Learn more about owning a property on the historic register."},href:function(e){return"//www.phila.gov/historical/designation/Pages/FAQ.aspx"}}},slots:{fields:[{label:"Historic Designation",value:function(e){return e.sources.histDesignated.data&&e.sources.histDesignated.data.length>0?null!=e.sources.histDesignated.data[0].properties.DDESIGDATE?"Designated: "+e.sources.histDesignated.data[0].properties.DDESIGDATE:null!=e.sources.histDesignated.data[0].properties.IDESIGDATE1?"Designated: "+e.sources.histDesignated.data[0].properties.IDESIGDATE1:null!=e.sources.histDesignated.data[0].properties.IDESIGDATE2?"Designated: "+e.sources.histDesignated.data[0].properties.IDESIGDATE2:"Not date available":"Not designated as historic."}},{label:"Building Age",value:function(e){return e.sources.opa.data?("Y"===e.sources.opa.data.year_built_estimate?" (estimated)":"","0000"===e.sources.opa.data.year_built_estimate?"No date available.":e.sources.opa.data.year_built):"No date available."}},{label:"Building Description",value:function(e){return e.sources.opa.data?R(e.sources.opa.data.building_code_description):"No description available."}},{label:"Historic District",value:function(e){return e.sources.histDistrict.data?e.sources.histDistrict.data.length>0?e.sources.histDistrict.data[0].properties.NAME+"<br>Designated - "+g()(e.sources.histDistrict.data[0].properties.DESIGNATED1).format("MMM Do, YYYY")+"<br><b><a href='https://www.phila.gov/historical/register/Pages/districts.aspx' target='_blank'>                        View a complete inventory of historic districts. <i class='fa fa-external-link'>                        </i></a></b>":"This property is not within a historic district.                  <br><b><a href='https://www.phila.gov/historical/register/Pages/districts.aspx' target='_blank'>                  View a complete inventory of historic districts. <i class='fa fa-external-link'></i></a></b>":"This property is not within a historic district.                <br><b><a href='https://www.phila.gov/historical/register/Pages/districts.aspx' target='_blank'>                View a complete inventory of historic districts. <i class='fa fa-external-link'></i></a></b>"}},{label:"Conservation District",value:function(e){return e.sources.neighConservation.data?e.sources.neighConservation.data.length>0?"<a href="+e.sources.neighConservation.data[0].properties.CODE_SECTION_LINK+' target="_blank">Yes - Click for more Info <i class="fa fa-external-link"></i></a>':"<a href='https://www.phila.gov/CityPlanning/resources/Publications/Conservation%20districts%20fact%20sheet.pdf' target='_blank'>This property is not within a conservation district. <i class='fa fa-external-link'></i></a>":"This property is not within a conservation district."}}]}},{type:"callout",slots:{text:"Historic streets identify older streets with historical value and include information                such as construction materials used. Legal cards are a collection of cards containing                the official record of the legal description and drawings of city streets.               <br>Source: Streets Department."}},{type:"vertical-table",slots:{title:"Historic Street Details",fields:[{label:"Historic Street",value:function(e){return e.sources.historicStreets.data?R(e.sources.historicStreets.data.ON_STREET)+" - "+R(e.sources.historicStreets.data.PRIMARYROA):"Street not designated as historic."}},{label:"Legal Card of City Street",value:function(e){return e.sources.histLegalCards.data?"<a href='"+e.sources.histLegalCards.data.LINK+"' target='_blank'>                View Image of legal card <i class='fa fa-external-link'></i></a>":"Legal card not available."}}]}},{type:"horizontal-table",options:{mapOverlay:{marker:"geojson",style:{fillColor:"#2176d2",color:"#2176d2",weight:2,opacity:1,fillOpacity:.3},hoverStyle:{fillColor:"yellow",color:"yellow",weight:2,opacity:1,fillOpacity:.3}},highlightOnMapMouseover:!1,fields:[{label:"Designated",value:function(e,t){return null!=t.properties.DDESIGDATE?t.properties.DDESIGDATE:null!=t.properties.IDESIGDATE1?t.properties.IDESIGDATE1:null!=t.properties.IDESIGDATE2?t.properties.IDESIGDATE2:"Not Available"}},{label:"Address",value:function(e,t){return t.properties.LOC}},{label:"Distance",value:function(e,t){return parseInt(t._distance)+" ft"}}],sort:{getValue:function(e){return e._distance},order:"asc"},externalLink:{forceShow:!0,action:function(){return"See a full map of all properties and districts from the Philadelphia Register of Historic Places."},name:"",href:function(e){return"//phl.maps.arcgis.com/apps/View/index.html?appid=0a0b23447b6b4f7097d59c580b9045fe"}}},slots:{title:"Nearby Historic Places",data:"historicNearby",items:function(e){return(e.sources.historicNearby.data||[]).map(function(e){return e})}}},{type:"callout",slots:{text:'For more information about historic buildings and the nomination process                please visit <a href="https://www.phila.gov/historical/pages/default.aspx"                target="_blank">The Philadelphia Historical Commission.<i class="fa fa-external-link"></i></a>'}}],basemap:"pwd",imagery:"historic1910",identifyFeature:"address-marker",parcels:"pwd"},P=_.phoneNumber.transform,L=_.titleCase.transform,k=_.nth.transform,M={key:"voting",icon:"gavel",label:"Voting",dataSources:["divisions","pollingPlaces","electedOfficials","nextElectionAPI"],errorMessage:function(){return" "},components:[{type:"badge",options:{titleBackground:"#2176d2",externalLink:{data:"Preview ballot",href:function(e){return"https://files.philadelphiavotes.com/ballot_paper/"+e.sources.electedOfficials.data.rows[0].ballot_file_id+".pdf"}}},slots:{title:"Next Eligible Election Is",value:function(e){return g()(e.sources.nextElectionAPI.data.election_date).format("dddd, LL")}}},{type:"callout",slots:{text:'          The deadline to register for the next election           is 30 days prior to the election.           You can confirm your registration and learn about           registering to vote<a target="_blank"           href="//www.philadelphiavotes.com/en/voters/registering-to-vote">           here <i class="fa fa-external-link"></i></a>.        '}},{type:"vertical-table",options:{nullValue:"None",externalLink:{action:function(){return"Learn about your voting options if you cannot vote in person on Election Day"},href:function(e){return"https://www.philadelphiavotes.com/en/voters/absentee-and-alternative-ballots"}}},slots:{title:"Polling Place",fields:[{label:"Location",value:function(e){var t=e.sources.pollingPlaces.data;return"<b>Ward "+t.WARD+", Division "+t.DIVISION+"</b><br>"+L(t.PLACENAME)+"<br>"+L(t.STREET_ADDRESS)+"<br>                   All locations are open on Election Day <br>from 7am to 8pm."}},{label:"Accessibility",value:function(e){var t=e.sources.pollingPlaces.data;return'<a href="//www.philadelphiavotes.com/en/voters/polling-place-accessibility"                      target="_blank">'+("F"==t.ACCESSIBILITY_CODE?"Building Fully Accessible":"B"==t.ACCESSIBILITY_CODE?"Building Substantially Accessible":"M"==t.ACCESSIBILITY_CODE?"Building Accessibility Modified":"A"==t.ACCESSIBILITY_CODE?"Alternate Entrance":"R"==t.ACCESSIBILITY_CODE?"Building Accessible With Ramp":"N"==t.ACCESSIBILITY_CODE?"Building Not Accessible":"Information not available")+' <i class="fa fa-external-link"></i></a>'}},{label:"Parking",value:function(e){var t=e.sources.pollingPlaces.data;return"N"==t.PARKING_CODE?"No Parking":"G"==t.PARKING_CODE?"General Parking":"L"==t.PARKING_CODE?"Loading Zone":"Information not available"}}]}},{type:"vertical-table",options:{nullValue:"None",externalLink:{action:function(){return"See all citywide, state, and federal representatives"},href:function(e){return"//www.philadelphiavotes.com/en/voters/elected-officials"}}},slots:{title:"Elected Representatives",fields:[{label:"District Council Member",value:function(e){var t=e.sources.electedOfficials.data.rows.filter(function(e){return"City Council"==e.office_label});return'<a href="'+t[0].website+'" target="_blank">'+t[0].first_name+" "+t[0].last_name+" - "+k(e.geocode.data.properties.council_district_2016)+" Council District                 <i class='fa fa-external-link'></i></a>"}},{label:"City Hall Office",value:function(e){var t=e.sources.electedOfficials.data.rows.filter(function(e){return"City Council"==e.office_label});return t[0].main_contact_address_2+"<br>"+P(t[0].main_contact_phone_1)+", "+P(t[0].main_contact_phone_2)+"<br>                      F: "+P(t[0].main_contact_fax)+' <br>                      <b><a href=mailto:"'+t[0].email+'">'+t[0].email+"</a></b>"}},{label:"Current Term",value:function(e){var t=e.sources.electedOfficials.data.rows.filter(function(e){return"City Council"==e.office_label});return t[0].next_election-4+" - "+t[0].next_election}}]}}],zoomToShape:["geojsonForTopic","markersForTopic"],geojsonForTopic:{data:function(e){return e.sources.divisions.data},key:"id",style:{fillColor:"#9e9ac8",color:"#9e9ac8",weight:2,opacity:1,fillOpacity:.3}},markersForTopic:{data:function(e){return e.sources.pollingPlaces.data},lat:"LAT",lng:"LON",key:"STREET_ADDRESS",color:"#54278f",icon:{prefix:"fas",icon:"landmark",shadow:!1,size:35}},basemap:"pwd",identifyFeature:"address-marker",parcels:"pwd"};r(173),r(168),r(166);a.a.add(i.faHome,n.faBook,s.faWrench,l.faUniversity,c.faGavel,u.faMapMarkerAlt,d.faLandmark,p.faBuilding,o.faScrollOld);var N=location.hostname,x=void 0===N?"":N;"localhost"===x||x.match(/(\d+\.){3}\d+/)||(console.log=console.info=console.debug=console.error=function(){});m.a.settings.currency.precision=0,b()({panels:["topics","map"],router:{enabled:!0},defaultAddressTextPlaceholder:{wideStyle:{"max-width":"100%","font-size":"24px","line-height":"28px"},narrowStyle:{"max-width":"100%","font-size":"20px","line-height":"24px"}},geolocation:{enabled:!0},addressInput:{width:415,mapWidth:300,position:"right",autocompleteEnabled:!1,autocompleteMax:15,placeholder:"Search the map"},rootStyle:{position:"absolute",bottom:0,left:0,right:0},gatekeeperKey:v.GATEKEEPER_KEY,map:{defaultBasemap:"pwd",defaultIdentifyFeature:"address-marker",imagery:{enabled:!0},initialImagery:"imagery2018"},baseConfig:"https://cdn.jsdelivr.net/gh/ajrothwell/mapboard-base-config@d18a86feb27b7e7c4496ed422ce30b5d80e64c1b/config.js",parcels:{pwd:{multipleAllowed:!1,geocodeFailAttemptParcel:null,clearStateOnError:!1,wipeOutOtherParcelsOnReverseGeocodeOnly:!0,geocodeField:"PARCELID",parcelIdInGeocoder:"pwd_parcel_id",getByLatLngIfIdFails:!1},dor:{multipleAllowed:!0,geocodeFailAttemptParcel:"pwd",clearStateOnError:!0,wipeOutOtherParcelsOnReverseGeocodeOnly:!1,geocodeField:"MAPREG",parcelIdInGeocoder:"dor_parcel_id",getByLatLngIfIdFails:!0}},imageOverlayGroups:{regmaps:{items:function(e){return e.sources.regmaps.data}}},legendControls:{water:{options:{topics:["water"],showWithBaseMapOnly:!1},data:{Roof:{"background-color":"#FEFF7F"},"Other Impervious Surface":{"background-color":"#F2DCFF"}}},deeds:{options:{topics:["deeds","zoning"],showWithBaseMapOnly:!0},data:{Easements:{"border-color":"rgb(255, 0, 197)","border-style":"solid","border-weight":"1px",width:"12px",height:"12px","font-size":"10px"},"Trans Parcels":{"border-color":"rgb(0, 168, 132)","border-style":"solid","border-weight":"1px",width:"12px",height:"12px","font-size":"10px"},"Rights of Way":{"border-color":"rgb(249, 147, 0)","border-style":"solid","border-weight":"1px",width:"12px",height:"12px","font-size":"10px"}}}},cyclomedia:{enabled:!0,measurementAllowed:!1,popoutAble:!0},pictometry:{enabled:!0},transforms:_,greeting:{message:'    <h2>Atlas is your front door to the City of Philadelphia.</h2>    <p>Here are some things you can do with Atlas:</p>    <div class="callout">      <ul>        <li>Get the history of permits, licenses, and inspections at any address</li>        <li>Research real estate information including property values, zoning, and document archives</li>        <li>Get easy access to a variety of hard-to-find City resources</li>        <li>View recent activity around your address, such as crimes, 311 service requests, and more</li>        <li>Explore historical imagery and maps</li>      </ul>    </div>    <p>To get started, click anywhere on the map, or type an address, intersection, property assessment account number, or Department of Records Map Registry number into the search box.</p>  '},dataSources:{threeOneOneCarto:{id:"threeOneOneCarto",type:"http-get-nearby",url:"https://phl.carto.com/api/v2/sql",options:{table:"public_cases_fc",dateMinNum:1,dateMinType:"year",dateField:"requested_datetime"}},condoList:D,crimeIncidents:{id:"crimeIncidents",type:"http-get-nearby",url:"https://phl.carto.com/api/v2/sql",options:{table:"incidents_part1_part2",dateMinNum:1,dateMinType:"year",dateField:"dispatch_date"}},divisions:{id:"divisions",url:"https://services.arcgis.com/fLeGjb7u4uXqeF9q/arcgis/rest/services/Political_Divisions/FeatureServer/0",type:"esri",options:{relationship:"contains"},success:function(e){return e}},dorCondoList:{id:"dorCondoList",type:"http-get",targets:{get:function(e){return e.parcels.dor.data},getTargetId:function(e){return e.properties.OBJECTID}},url:"https://phl.carto.com/api/v2/sql",options:{params:{q:function(e,t){return"select * from condominium where mapref = '"+t.parcels.dor.data[0].properties.MAPREG+"'                                          and status in (1,3)"}}}},dorDocuments:S,electedOfficials:{id:"electedOfficials",type:"http-get",url:"https://phl.carto.com/api/v2/sql",options:{params:{q:function(e){return"WITH split AS (SELECT * FROM splits WHERE precinct = '"+e.properties.election_precinct+"')                 SELECT eo.*, s.ballot_file_id                FROM elected_officials eo, split s                 WHERE eo.office = 'city_council' AND eo.district = s.city_district                            OR eo.office = 'state_house' AND eo.district = s.state_house                            OR eo.office = 'state_senate' AND eo.district = s.state_senate                            OR eo.office = 'us_house' AND eo.district = s.federal_house                 "}}}},liBusinessLicenses:{id:"liBusinessLicenses",type:"http-get",url:"https://phl.carto.com/api/v2/sql",options:{params:{q:function(e){return"select * from li_business_licenses where eclipse_addressobjectid = '"+e.properties.eclipse_location_id+"'"}}}},histDesignated:{id:"histDesignated",url:"http://services.arcgis.com/fLeGjb7u4uXqeF9q/arcgis/rest/services/Historic_sites_PhilReg/FeatureServer/0",type:"esri",options:{relationship:"contains"}},histDistrict:{id:"histDistrict",url:"https://services.arcgis.com/fLeGjb7u4uXqeF9q/ArcGIS/rest/services/HistoricDistricts_Local/FeatureServer/0",type:"esri",options:{relationship:"contains"}},histLegalCards:{id:"histLegalCards",type:"http-get",url:"//services.arcgis.com/fLeGjb7u4uXqeF9q/ArcGIS/rest/services/Legal_Cards/FeatureServer/0/query",options:{params:{where:function(e){return"SEG_ID = '"+e.properties.seg_id+"'"},outFields:"OBJECTID, LINK, ST_NAME, IMAGE_, MODDATE, STATUS, SEG_ID",returnDistinctValues:"true",returnGeometry:"false",f:"json"},success:function(e){return e.features[0]?e.features[0].attributes:null}}},historicNearby:{id:"historicNearby",type:"esri-nearby",url:"https://services.arcgis.com/fLeGjb7u4uXqeF9q/ArcGIS/rest/services/Historic_sites_PhilReg/FeatureServer/0",options:{geometryServerUrl:"//gis.phila.gov/arcgis/rest/services/Geometry/GeometryServer/",calculateDistance:!0,distances:660,limit:10}},historicStreets:{id:"historicStreets",type:"http-get",url:"//services.arcgis.com/fLeGjb7u4uXqeF9q/arcgis/rest/services/Historic_Streets/FeatureServer/0/query",options:{params:{where:function(e){return"SEG_ID = '"+e.properties.seg_id+"'"},outFields:"PRIMARYROA, RESPONSIBL, SEG_ID, ON_STREET, CLASS",returnDistinctValues:"true",returnGeometry:"false",f:"json"},success:function(e){return e.features[0]?e.features[0].attributes:null}}},liInspections:{id:"liInspections",type:"http-get",url:"https://phl.carto.com/api/v2/sql",options:{params:{q:function(e){return"select * from li_case_inspections where address = '"+e.properties.street_address+"' or addresskey = '"+e.properties.li_address_key.toString()+"'"}}}},liPermits:{id:"liPermits",type:"http-get",url:"https://phl.carto.com/api/v2/sql",options:{params:{q:function(e){return"select * from li_permits where address = '"+e.properties.street_address+"' or addresskey = '"+e.properties.li_address_key.toString()+"'"}}}},liViolations:{id:"liViolations",type:"http-get",url:"https://phl.carto.com/api/v2/sql",options:{params:{q:function(e){return"select * from li_violations where address = '"+e.properties.street_address+"' or addresskey = '"+e.properties.li_address_key.toString()+"'"}}}},nearbyZoningAppeals:{id:"nearbyZoningAppeals",type:"http-get-nearby",url:"https://phl.carto.com/api/v2/sql",options:{table:"li_appeals",dateMinNum:1,dateMinType:"year",dateField:"decisiondate"}},neighConservation:{id:"neighConservation",type:"esri",url:"https://services.arcgis.com/fLeGjb7u4uXqeF9q/ArcGIS/rest/services/Zoning_Overlays/FeatureServer/0",options:{relationship:"contains",where:"OVERLAY_NAME LIKE '%Neighborhood Conservation%'"}},nextElectionAPI:{id:"nextElectionAPI",type:"http-get",url:"https://apis.philadelphiavotes.com/election",options:{},success:function(e){return e}},opa:{id:"opa",type:"http-get",url:"https://data.phila.gov/resource/w7rb-qrn8.json",options:{params:{parcel_number:function(e){return e.properties.opa_account_num?e.properties.opa_account_num:e.properties.BRT_ID}},success:function(e){return e[0]}}},pollingPlaces:{id:"pollingPlaces",type:"http-get",url:"//services.arcgis.com/fLeGjb7u4uXqeF9q/arcgis/rest/services/POLLING_PLACES/FeatureServer/0/query",options:{params:{where:function(e){return"PRECINCT = '"+e.properties.election_precinct+"'"},outFields:"WARD, DIVISION, PRECINCT, PLACENAME,                 STREET_ADDRESS, ZIP_CODE, ACCESSIBILITY_CODE, PARKING_CODE,                 LAT, LON",returnDistinctValues:"true",returnGeometry:"false",f:"json"},success:function(e){return e.features[0]?e.features[0].attributes:null}}},rco:{id:"rco",type:"esri",url:"//services.arcgis.com/fLeGjb7u4uXqeF9q/arcgis/rest/services/Zoning_RCO/FeatureServer/0",options:{relationship:"contains"}},regmaps:A,vacantIndicatorsPoints:{id:"vacantIndicatorsPoints",type:"esri-nearby",url:"https://services.arcgis.com/fLeGjb7u4uXqeF9q/arcgis/rest/services/Vacant_Indicators_Points/FeatureServer/0",options:{geometryServerUrl:"//gis.phila.gov/arcgis/rest/services/Geometry/GeometryServer/",calculateDistance:!0,distances:500}},zoningAppeals:{id:"zoningAppeals",type:"http-get",url:"https://phl.carto.com/api/v2/sql",options:{params:{q:function(e){var t="select * from li_appeals where address = '"+e.properties.street_address+"'",r=e.properties.li_address_key;return r&&r.length>0&&(t+=" or addresskey = '"+e.properties.li_address_key.toString()+"'"),t}}}},zoningBase:{id:"zoningBase",type:"http-get",dependent:"parcel",targets:{get:function(e){return e.parcels.dor.data},getTargetId:function(e){return e.properties.OBJECTID}},url:"https://phl.carto.com/api/v2/sql",options:{params:{q:function(e,t){return"              WITH all_zoning AS                 (                   SELECT *                   FROM   phl.zoning_basedistricts                 ),               parcel AS                 (                   SELECT *                   FROM   phl.dor_parcel                   WHERE  dor_parcel.mapreg = '"+e.properties.MAPREG+"'                 ),               zp AS                 (                   SELECT all_zoning.*                   FROM   all_zoning, parcel                   WHERE  St_intersects(parcel.the_geom, all_zoning.the_geom)                 ),               combine AS                 (                   SELECT zp.objectid,                   zp.long_code,                   zp.pending,                   zp.pendingbill,                   zp.pendingbillurl,                   St_area(St_intersection(zp.the_geom, parcel.the_geom)) / St_area(parcel.the_geom) AS overlap_area                   FROM zp, parcel                 ),               total AS                 (                   SELECT long_code, pending, pendingbill, pendingbillurl, sum(overlap_area) as sum_overlap_area                   FROM combine                   GROUP BY long_code, pending, pendingbill, pendingbillurl                 )               SELECT *               FROM total               WHERE sum_overlap_area >= 0.01             "}}}},zoningDocs:{id:"zoningDocs",type:"http-get",url:"https://phl.carto.com/api/v2/sql",options:{params:{q:function(e){return"select * from ais_zoning_documents where doc_id = ANY('{"+e.properties.zoning_document_ids+"}'::text[])"}}}},zoningOverlay:{id:"zoningOverlay",type:"http-get",dependent:"parcel",targets:{get:function(e){return e.parcels.dor.data},getTargetId:function(e){return e.properties.OBJECTID}},url:"https://phl.carto.com/api/v2/sql",options:{params:{q:function(e,t){return"            WITH all_zoning AS               (                 SELECT *                 FROM   phl.zoning_overlays               ),             parcel AS               (                 SELECT *                 FROM   phl.dor_parcel                 WHERE  dor_parcel.mapreg = '"+e.properties.MAPREG+"'               ),             zp AS               (                 SELECT all_zoning.*                 FROM all_zoning, parcel                 WHERE st_intersects(parcel.the_geom, all_zoning.the_geom)               ),             total AS               (                 SELECT zp.*, st_area(St_intersection(zp.the_geom, parcel.the_geom)) / st_area(parcel.the_geom) AS overlap_area                 FROM   zp, parcel               )             SELECT cartodb_id,                   code_section,                   code_section_link,                   objectid,                   overlap_area,                   overlay_name,                   overlay_symbol,                   pending,                   pendingbill,                   pendingbillurl,                   sunset_date,                   type             FROM total             WHERE overlap_area >= 0.01           "}}}}},topics:[{key:"property",icon:"home",label:"Property Assessments",dataSources:["opa"],components:[{type:"callout",slots:{text:"          Property assessment and sale information for this address. Source: Office of Property Assessments (OPA). OPA was formerly a part of the Bureau of Revision of Taxes (BRT) and some City records may still use that name.        "}},{type:"vertical-table",slots:{fields:[{label:"OPA Account #",value:function(e){return e.geocode.data.properties.opa_account_num}},{label:"OPA Address",value:function(e){return e.geocode.data.properties.opa_address}},{label:"Owners",value:function(e){return e.geocode.data.properties.opa_owners.join(", ")}},{label:"Assessed Value",value:function(e){var t=e.sources.opa.data;return t?t.market_value:"no data"},transforms:["currency"]},{label:"Sale Date",value:function(e){var t=e.sources.opa.data;return t?t.sale_date:"no data"},transforms:["date"]},{label:"Sale Price",value:function(e){var t=e.sources.opa.data;return t?t.sale_price:"no data"},transforms:["currency"]}]},options:{id:"opaData",externalLink:{action:function(e){return"See more"},name:"Property Search",href:function(e){return"http://property.phila.gov/?p="+e.geocode.data.properties.opa_account_num}}}}],identifyFeature:"address-marker",parcels:"pwd",errorMessage:function(e){var t=e.sources.condoList.data;if(!t)return"There is no property assessment record for this address.";var r=t.total_size;if(r>0){var a=r>1;return["<h3>","There ",a?"are":"is"," ",r," condominium ",a?"units":"unit"," at this address.</h3>","<p>You can use the Condominiums tab below to see information for an individual unit.</p>"].join("")}}},E,I,C,w,O,M,T],components:[{type:"topic-set",options:{defaultTopic:"property"}}]})},229:function(e,t){},380:function(e,t,r){var a={"./en-SG":131,"./en-SG.js":131,"./en-au":130,"./en-au.js":130,"./en-ca":129,"./en-ca.js":129,"./en-gb":128,"./en-gb.js":128,"./en-ie":127,"./en-ie.js":127,"./en-il":126,"./en-il.js":126,"./en-nz":125,"./en-nz.js":125};function i(e){var t=n(e);return r(t)}function n(e){var t=a[e];if(!(t+1)){var r=new Error('Cannot find module "'+e+'".');throw r.code="MODULE_NOT_FOUND",r}return t}i.keys=function(){return Object.keys(a)},i.resolve=n,e.exports=i,i.id=380},402:function(e,t,r){(e.exports=r(29)(!1)).push([e.i,".greeting > h2 {\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.greeting > .callout {\r\n  border-color: #58c04d;\r\n  background: #fff;\r\n  /*margin: 0 0 1rem 0;*/\r\n  padding: 1rem;\r\n}\r\n\r\n.greeting > .callout > ul {\r\n  margin: 0 0 0 1.42857rem;\r\n  padding: 0 0 0 1.42857rem;\r\n}\r\n\r\n#application .site-header, #application .app-footer {\r\n\tbackground: #2176d2;\r\n}\r\n\r\n#application .site-header .page-title-container h1 {\r\n\tfont-size: 2.14286rem;\r\n}\r\n\r\n/*this fixes an issue with the topic panel scrolling over the footer padding*/\r\n#application .app-footer {\r\n\tposition: relative;\r\n}\r\n\r\n/*small*/\r\n@media screen and (max-width: 39.9375em) {\r\n\t.logo {\r\n\t\tfloat: left;\r\n\t}\r\n\r\n\t.page-title-container {\r\n\t\tfloat: right;\r\n\t}\r\n}\r\n",""])},403:function(e,t,r){var a=r(402);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r(28)(a,i);a.locals&&(e.exports=a.locals)},404:function(e,t,r){e.exports=r.p+"index.html"},405:function(e,t,r){r(404),r(403),e.exports=r(150)}});
//# sourceMappingURL=app.js.map