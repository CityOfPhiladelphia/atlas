(window.webpackJsonp=window.webpackJsonp||[]).push([[52],Array(272).concat([function(t,e,n){"use strict";n.r(e);var r=n(0),o={name:"Control",props:["position"],methods:{createLeafletElement(t){return new class extends t.Control{constructor(t,e){super(e),this.el=t}onAdd(){const e=this.el;return t.DomEvent.disableClickPropagation(e),t.DomEvent.disableScrollPropagation(e),e}}(this.$el,{position:this.position})},parentMounted(t,e){const n=this.createLeafletElement(r);this.$leafletElement=n;const o=t.$leafletElement;n.addTo(o)}}},i=n(37),s=Object(i.a)(o,function(){var t=this.$createElement;return(this._self._c||t)("div",[this._t("default")],2)},[],!1,null,null,null);e.default=s.exports},function(t,e,n){var r=n(293),o=n(374),i=n(375),s="[object Null]",a="[object Undefined]",l=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?a:s:l&&l in Object(t)?o(t):i(t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},,,,,,function(t,e,n){"use strict";e.a=function(t,e,n){const r=Object.keys(n).filter(t=>t.startsWith("l-")).map(t=>t.slice(2));for(let n of r){const r="l-"+n;e.on(n,e=>{t.$emit(r,e)})}}},function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"f",function(){return i}),n.d(e,"e",function(){return s}),n.d(e,"g",function(){return a}),n.d(e,"a",function(){return l}),n.d(e,"c",function(){return c}),n.d(e,"d",function(){return u});var r={meters:6371008.8,metres:6371008.8,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:6371008.8/1852,inches:6371008.8*39.37,yards:6371008.8/1.0936,feet:20902260.511392,radians:1,degrees:6371008.8/111325};function o(t,e,n){if(!u(n=n||{}))throw new Error("options is invalid");var r=n.bbox,o=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&d(r),o&&h(o);var i={type:"Feature"};return o&&(i.id=o),r&&(i.bbox=r),i.properties=e||{},i.geometry=t,i}function i(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!c(t[0])||!c(t[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:t},e,n)}function s(t,e,n){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!c(t[0][1])||!c(t[0][1]))throw new Error("coordinates must contain numbers");return o({type:"LineString",coordinates:t},e,n)}function a(t,e){if(void 0===t||null===t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=r[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function l(t){if(null===t||void 0===t)throw new Error("degrees is required");return t%360*Math.PI/180}function c(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function u(t){return!!t&&t.constructor===Object}function d(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!c(t))throw new Error("bbox must only contain numbers")})}function h(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},,,,,function(t,e,n){var r=n(355);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(17)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){var r=n(357);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(17)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){var r=n(359);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(17)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){var r=n(361);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(17)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){var r=n(363);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(17)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){var r=n(365);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(17)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){var r=n(294).Symbol;t.exports=r},function(t,e,n){var r=n(332),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(331),o=n(337);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},function(t,e,n){var r=n(416);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(17)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(this,n(9))},function(t,e,n){var r=n(418);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(17)(r,o);r.locals&&(t.exports=r.locals)},,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var r=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},o=n(298),i="object"==typeof self&&self&&self.Object===Object&&self,s=o.a||i||Function("return this")(),a=function(){return s.Date.now()},l=s.Symbol,c=Object.prototype,u=c.hasOwnProperty,d=c.toString,h=l?l.toStringTag:void 0;var p=function(t){var e=u.call(t,h),n=t[h];try{t[h]=void 0;var r=!0}catch(t){}var o=d.call(t);return r&&(e?t[h]=n:delete t[h]),o},m=Object.prototype.toString;var f=function(t){return m.call(t)},g="[object Null]",y="[object Undefined]",v=l?l.toStringTag:void 0;var b=function(t){return null==t?void 0===t?y:g:v&&v in Object(t)?p(t):f(t)};var _=function(t){return null!=t&&"object"==typeof t},x="[object Symbol]";var C=function(t){return"symbol"==typeof t||_(t)&&b(t)==x},w=NaN,k=/^\s+|\s+$/g,$=/^[-+]0x[0-9a-f]+$/i,M=/^0b[01]+$/i,S=/^0o[0-7]+$/i,j=parseInt;var E=function(t){if("number"==typeof t)return t;if(C(t))return w;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(k,"");var n=M.test(t);return n||S.test(t)?j(t.slice(2),n?2:8):$.test(t)?w:+t},O="Expected a function",T=Math.max,F=Math.min;e.a=function(t,e,n){var o,i,s,l,c,u,d=0,h=!1,p=!1,m=!0;if("function"!=typeof t)throw new TypeError(O);function f(e){var n=o,r=i;return o=i=void 0,d=e,l=t.apply(r,n)}function g(t){var n=t-u;return void 0===u||n>=e||n<0||p&&t-d>=s}function y(){var t=a();if(g(t))return v(t);c=setTimeout(y,function(t){var n=e-(t-u);return p?F(n,s-(t-d)):n}(t))}function v(t){return c=void 0,m&&o?f(t):(o=i=void 0,l)}function b(){var t=a(),n=g(t);if(o=arguments,i=this,u=t,n){if(void 0===c)return function(t){return d=t,c=setTimeout(y,e),h?f(t):l}(u);if(p)return c=setTimeout(y,e),f(u)}return void 0===c&&(c=setTimeout(y,e)),l}return e=E(e)||0,r(n)&&(h=!!n.leading,s=(p="maxWait"in n)?T(E(n.maxWait)||0,e):s,m="trailing"in n?!!n.trailing:m),b.cancel=function(){void 0!==c&&clearTimeout(c),d=0,o=u=i=c=void 0},b.flush=function(){return void 0===c?l:v(a())},b}},,,,function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return l});var r=n(281);function o(t,e,n){if(null!==t)for(var r,i,s,a,l,c,u,d,h=0,p=0,m=t.type,f="FeatureCollection"===m,g="Feature"===m,y=f?t.features.length:1,v=0;v<y;v++){l=(d=!!(u=f?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var b=0;b<l;b++){var _=0,x=0;if(null!==(a=d?u.geometries[b]:u)){c=a.coordinates;var C=a.type;switch(h=!n||"Polygon"!==C&&"MultiPolygon"!==C?0:1,C){case null:break;case"Point":if(!1===e(c,p,v,_,x))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<c.length;r++){if(!1===e(c[r],p,v,_,x))return!1;p++,"MultiPoint"===C&&_++}"LineString"===C&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<c.length;r++){for(i=0;i<c[r].length-h;i++){if(!1===e(c[r][i],p,v,_,x))return!1;p++}"MultiLineString"===C&&_++,"Polygon"===C&&x++}"Polygon"===C&&_++;break;case"MultiPolygon":for(r=0;r<c.length;r++){for("MultiPolygon"===C&&(x=0),i=0;i<c[r].length;i++){for(s=0;s<c[r][i].length-h;s++){if(!1===e(c[r][i][s],p,v,_,x))return!1;p++}x++}_++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===o(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(t,e){var n,r,o,i,s,a,l,c,u,d,h=0,p="FeatureCollection"===t.type,m="Feature"===t.type,f=p?t.features.length:1;for(n=0;n<f;n++){for(a=p?t.features[n].geometry:m?t.geometry:t,c=p?t.features[n].properties:m?t.properties:{},u=p?t.features[n].bbox:m?t.bbox:void 0,d=p?t.features[n].id:m?t.id:void 0,s=(l=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,o=0;o<s;o++)if(null!==(i=l?a.geometries[o]:a))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(i,h,c,u,d))return!1;break;case"GeometryCollection":for(r=0;r<i.geometries.length;r++)if(!1===e(i.geometries[r],h,c,u,d))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,c,u,d))return!1;h++}}function s(t,e,n){var r=n;return i(t,function(t,o,i,s,a){r=0===o&&void 0===n?t:e(r,t,o,i,s,a)}),r}function a(t,e){i(t,function(t,n,o,i,s){var a,l=null===t?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Object(r.b)(t,o,{bbox:i,id:s}),n,0)&&void 0}switch(l){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var c=0;c<t.coordinates.length;c++){var u={type:a,coordinates:t.coordinates[c]};if(!1===e(Object(r.b)(u,o),n,c))return!1}})}function l(t,e,n){var i=n,s=!1;return function(t,e){a(t,function(t,n,i){var s=0;if(t.geometry){var a,l=t.geometry.type;if("Point"!==l&&"MultiPoint"!==l)return!1!==o(t,function(o,l,c,u,d){if(void 0!==a){var h=Object(r.e)([a,o],t.properties);if(!1===e(h,n,i,d,s))return!1;s++,a=o}else a=o})&&void 0}})}(t,function(t,r,o,a,l){i=!1===s&&void 0===n?t:e(i,t,r,o,a,l),s=!0}),i}},function(t,e,n){var r=n(330);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(372),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,n){var r=n(273),o=n(282),i="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",l="[object Proxy]";t.exports=function(t){if(!o(t))return!1;var e=r(t);return e==s||e==a||e==i||e==l}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(9))},function(t,e,n){var r=n(334),o=n(381),i=n(382);t.exports=function(t,e){return i(o(t,e,r),t+"")}},function(t,e){t.exports=function(t){return t}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(295),o=n(296),i=n(338),s=n(282);t.exports=function(t,e,n){if(!s(n))return!1;var a=typeof e;return!!("number"==a?o(n)&&i(e,n.length):"string"==a&&e in n)&&r(n[e],t)}},function(t,e){var n=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}},function(t,e){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var o=typeof t;return!!(e=null==e?n:e)&&("number"==o||"symbol"!=o&&r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(387),o=n(388),i=n(340),s=n(390),a=n(338),l=n(392),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=i(t),u=!n&&o(t),d=!n&&!u&&s(t),h=!n&&!u&&!d&&l(t),p=n||u||d||h,m=p?r(t.length,String):[],f=m.length;for(var g in t)!e&&!c.call(t,g)||p&&("length"==g||d&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,f))||m.push(g);return m}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(273),o=n(274),i=n(399),s="[object DOMException]",a="[object Error]";t.exports=function(t){if(!o(t))return!1;var e=r(t);return e==a||e==s||"string"==typeof t.message&&"string"==typeof t.name&&!i(t)}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},function(t,e){t.exports=/<%=([\s\S]+?)%>/g},function(t,e,n){var r=n(411);t.exports=function(t){return null==t?"":r(t)}},,,,,,,,function(t,e,n){"use strict";var r=n(287);n.n(r).a},function(t,e,n){(t.exports=n(16)(!1)).push([t.i,"\n.leaflet-fullleft {\n  position: absolute;\n  bottom: 0px; /* possible because the placeholder's parent is the map */\n  left: 0px;\n  padding-bottom: 10px;\n  z-index: 500;\n}\n.leaflet-fulltop {\n  position: absolute;\n  top: 10px;\n  left: 0px;\n  padding-bottom: 10px;\n  z-index: 500;\n}\n.leaflet-centervert {\n  /* position: relative; */\n  /* top: 100px;\n  left: 0px; */\n  /* padding-top: 40%; */\n  padding-bottom: 30%;\n  z-index: 500;\n}\n.leaflet-almostleft {\n  position: absolute;\n  bottom: 0px;\n  left: 30px;\n  padding-bottom: 10px;\n  z-index: 500;\n}\n.leaflet-almostleft .leaflet-control {\n  margin-bottom: 0px;\n}\n.leaflet-almostright {\n  position: absolute;\n  top: 0px;\n  right: 60px;\n  padding-bottom: 10px;\n  z-index: 500;\n}\n.leaflet-almostright .leaflet-control {\n  margin-top: 10px;\n}\n",""])},function(t,e,n){"use strict";var r=n(288);n.n(r).a},function(t,e,n){(t.exports=n(16)(!1)).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* .toggle-tab {\n  position: absolute;\n  left: 0px;\n  border-width: 1.3px;\n  border-color: #CAC9C9;\n  height: 48px;\n  line-height: 58px;\n  width:24px;\n  background-color: white;\n  display: inline-block;\n  z-index: 500; */\n  /* border-left-style: solid; */\n  /* box-shadow: 2px 2px 7px grey; */\n/* } */\n.toggle-tab[data-v-8c11c8ec] {\n  display: none;\n}\n.align-span[data-v-8c11c8ec] {\n  margin-left: 6px;\n}\n@media screen and (min-width: 46.875em) {\n.toggle-tab[data-v-8c11c8ec] {\n    position: absolute;\n    left: 0px;\n    border-width: 1.3px;\n    border-style: solid;\n    border-color: #CAC9C9;\n    height: 48px;\n    line-height: 56px;\n    width:24px;\n    background-color: white;\n    display: inline-block;\n    z-index: 500;\n    opacity: 0.7;\n    /* border-left-style: solid; */\n    /* box-shadow: 2px 2px 7px grey; */\n}\n}\n\n",""])},function(t,e,n){"use strict";var r=n(289);n.n(r).a},function(t,e,n){(t.exports=n(16)(!1)).push([t.i,"\n.map-container {\n  height: 100%;\n}\n.map-container-type2 {\n  height: calc(100vh - 109px);\n}\n.map {\n  height: 100%;\n}\n@media (max-width: 749px) {\n.map-container {\n    height: 300px;\n}\n}\n\n/* @media screen and (max-width: 40em) { */\n@media screen and (max-width: 750px) {\n.map-container-type2 {\n    height: calc(100vh - 141px);\n}\n}\n",""])},function(t,e,n){"use strict";var r=n(290);n.n(r).a},function(t,e,n){(t.exports=n(16)(!1)).push([t.i,"\n.button-image[data-v-d4d27222] {\n  vertical-align: top;\n}\n",""])},function(t,e,n){"use strict";var r=n(291);n.n(r).a},function(t,e,n){(t.exports=n(16)(!1)).push([t.i,"\n.inactive[data-v-de1d88fe] {\n  background-color: #ffffff;\n}\n.inactive[data-v-de1d88fe]:hover {\n  background-color: #ffffff;\n}\n.active[data-v-de1d88fe] {\n  background-color: rgb(243, 198, 19);\n}\n.active[data-v-de1d88fe]:hover {\n  background-color: rgb(243, 198, 19);\n}\n\n",""])},function(t,e,n){"use strict";var r=n(292);n.n(r).a},function(t,e,n){(t.exports=n(16)(!1)).push([t.i,"\n.inactive[data-v-a840eff2] {\n  background-color: #ffffff;\n}\n.inactive[data-v-a840eff2]:hover {\n  background-color: #ffffff;\n}\n.active[data-v-a840eff2] {\n  background-color: rgb(243, 198, 19);\n}\n.active[data-v-a840eff2]:hover {\n  background-color: rgb(243, 198, 19);\n}\n\n",""])},function(t,e,n){t.exports=function(t,e,n,r){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,n=n&&n.hasOwnProperty("default")?n.default:n,r=r&&r.hasOwnProperty("default")?r.default:r;var o={acres:{factor:24711e-8,display:"acres",decimals:2},feet:{factor:3.2808,display:"feet",decimals:0},kilometers:{factor:.001,display:"kilometers",decimals:2},hectares:{factor:1e-4,display:"hectares",decimals:2},meters:{factor:1,display:"meters",decimals:0},miles:{factor:3.2808/5280,display:"miles",decimals:2},sqfeet:{factor:10.7639,display:"sqfeet",decimals:0},sqmeters:{factor:1,display:"sqmeters",decimals:0},sqmiles:{factor:3.86102e-7,display:"sqmiles",decimals:2}};function i(t){if(t)return t.setAttribute("style","display:none;"),t}function s(t){if(t)return t.removeAttribute("style"),t}function a(r){r[r.length-1];var o=r.map(function(t){return[t.lat,t.lng]}),i=new t.Polyline(o),s=new t.Polygon(o);return{length:1e3*e(i.toGeoJSON(),{units:"kilometers"}),area:n(s.toGeoJSON())}}var l={activeColor:"#ABE67E",completedColor:"#C8F2BE"},c=function(t){this._options=L.extend({},l,this._options,t)};c.prototype.getSymbol=function(t){return{measureDrag:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:.7,fillColor:this._options.activeColor,fillOpacity:.5,className:"layer-measuredrag"},measureArea:{clickable:!1,stroke:!1,fillColor:this._options.activeColor,fillOpacity:.2,className:"layer-measurearea"},measureBoundary:{clickable:!1,color:this._options.activeColor,weight:2,opacity:.9,fill:!1,className:"layer-measureboundary"},measureVertex:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:1,fillColor:this._options.activeColor,fillOpacity:.7,className:"layer-measurevertex"},measureVertexActive:{clickable:!1,radius:4,color:this._options.activeColor,weight:2,opacity:1,fillColor:this._options.activeColor,fillOpacity:1,className:"layer-measurevertex active"},resultArea:{clickable:!0,color:this._options.completedColor,weight:2,opacity:.9,fillColor:this._options.completedColor,fillOpacity:.2,className:"layer-measure-resultarea"},resultLine:{clickable:!0,color:this._options.completedColor,weight:3,opacity:.9,fill:!1,className:"layer-measure-resultline"},resultPoint:{clickable:!0,radius:4,color:this._options.completedColor,weight:2,opacity:1,fillColor:this._options.completedColor,fillOpacity:.7,className:"layer-measure-resultpoint"}}[t]};var u=function(t,e){return e||(e=document),e.querySelector(t)};function d(t){return t.toLocaleString()}var h={imports:{numberFormat:d},interpolate:/{{([\s\S]+?)}}/g},p=r('<a class="{{ model.className }}-toggle js-toggle" href="#" title="Measure distances and areas">Measure</a>\r\n<div class="{{ model.className }}-interaction js-interaction">\r\n  <div class="js-startprompt startprompt">\r\n    <h3>Measure distances and areas</h3>\r\n    <ul class="tasks">\r\n      <a href="#" class="js-start start">Create a new measurement</a>\r\n    </ul>\r\n  </div>\r\n  <div class="js-measuringprompt">\r\n    <h3>Measure distances and areas</h3>\r\n    <p class="js-starthelp">Start creating a measurement by adding points to the map</p>\r\n    <div class="js-results results"></div>\r\n    <ul class="js-measuretasks tasks">\r\n      <li><a href="#" class="js-cancel cancel">Cancel</a></li>\r\n      <li><a href="#" class="js-undo undo">Undo</a></li>\r\n      <li><a href="#" class="js-finish finish">Finish measurement</a></li>\r\n    </ul>\r\n  </div>\r\n</div>\r\n',h),m=r('<% if (model.pointCount > 0) { %>\r\n  <div class="group">\r\n      <table>\r\n        <tr>\r\n          <th style="padding-left:5px; padding-right:5px">Lat</th>\r\n          <th style="padding-left:5px; padding-right:5px">Lon</th>\r\n          <th style="padding-left:5px; padding-right:5px">Length (ft)</th>\r\n        </tr><tr>\r\n\r\n          <% for (i=0; i < model.points.length; i++) { %>\r\n            </tr><tr>\r\n              <td>\r\n                {{ numberFormat(model.points[i].lat, 6) }}\r\n              </td>\r\n              <td>\r\n                {{ numberFormat(model.points[i].lng, 6) }}\r\n              </td>\r\n              <td>\r\n                {{ model.lengths[i-1] }}\r\n              </td>\r\n            </tr>\r\n          <% } %>\r\n\r\n      </table>\r\n  </div>\r\n<% } %>\r\n\r\n<% if (model.pointCount > 1) { %>\r\n<div class="group">\r\n  <p><span class="heading"></span>Total Distance: {{ model.lengthDisplay }} Feet</p>\r\n</div>\r\n<% } %>\r\n<% if (model.pointCount > 2) { %>\r\n<div class="group">\r\n  <p><span class="heading"></span>Area: {{ model.areaDisplay }} Sq Feet</p>\r\n</div>\r\n<% } %>\r\n',h),f=r('<h3>Point location</h3>\r\n<table>\r\n  <tr>\r\n    <th style="padding-left:5px; padding-right:5px; text-align:center"><span class="heading">Lat</span></th>\r\n    <th style="padding-left:5px; padding-right:5px; text-align:center"><span class="heading">Lon</span></th>\r\n  </tr>\r\n  <tr>\r\n    <td style="padding-left:5px; padding-right:5px">\r\n      {{ numberFormat(model.lastCoord.dd.y, 6) }}\r\n    </td>\r\n    <td style="padding-left:5px; padding-right:5px">\r\n      {{ numberFormat(model.lastCoord.dd.x, 6) }}\r\n    </td>\r\n  </tr>\r\n</table>\r\n<ul class="tasks">\r\n  <li><a href="#" class="js-zoomto zoomto">Center on this location</a></li>\r\n  <li><a href="#" class="js-deletemarkup deletemarkup">Delete</a></li>\r\n</ul>\r\n',h),g=r('<h3>Linear measurement</h3>\r\n<p>{{ model.lengthDisplay }} Feet</p>\r\n<ul class="tasks">\r\n  <li><a href="#" class="js-zoomto zoomto">Center on this line</a></li>\r\n  <li><a href="#" class="js-deletemarkup deletemarkup">Delete</a></li>\r\n</ul>\r\n',h),y=r('<h3>Area measurement</h3>\r\n\r\n\r\n<% if (model.pointCount > 0) { %>\r\n  <p>\r\n    <table>\r\n      <tr>\r\n        <th style="padding-left:5px; padding-right:5px; text-align:center"><span class="heading">Lat</span></th>\r\n        <th style="padding-left:5px; padding-right:5px; text-align:center"><span class="heading">Lon</span></th>\r\n        <th style="padding-left:5px; padding-right:5px; text-align:center"><span class="heading">Length (ft)</span></th>\r\n      </tr>\r\n      <tr>\r\n        <% for (i=0; i < model.points.length; i++) { %>\r\n          </tr><tr>\r\n            <td>\r\n              {{ numberFormat(model.points[i].lat, 6) }}\r\n            </td>\r\n            <td>\r\n              {{ numberFormat(model.points[i].lng, 6) }}\r\n            </td>\r\n            <td>\r\n              {{ model.lengths[i-1] }}\r\n            </td>\r\n          </tr>\r\n        <% } %>\r\n      </table>\r\n  </p>\r\n<% } %>\r\n<p>Total Distance: {{ model.lengthDisplay }} Feet</p>\r\n<p>Area: {{ model.areaDisplay }} Sq Feet</p>\r\n<ul class="tasks">\r\n  <li><a href="#" class="js-zoomto zoomto">Center on this area</a></li>\r\n  <li><a href="#" class="js-deletemarkup deletemarkup">Delete</a></li>\r\n</ul>\r\n',h);return t.Control.extend({_className:"leaflet-control-measure",options:{units:{},position:"topright",primaryLengthUnit:"feet",primaryAreaUnit:"sqfeet",activeColor:"#ABE67E",completedColor:"#74acbd",captureZIndex:1e4,popupOptions:{className:"leaflet-measure-resultpopup",autoPanPadding:[10,10]}},initialize:function(e){t.setOptions(this,e);var n=this.options,r=n.activeColor,i=n.completedColor;this._symbols=new c({activeColor:r,completedColor:i}),this.options.units=Object.assign({},o,this.options.units)},onAdd:function(e){return this._map=e,this._latlngs=[],this._lengths=[],this._lengthNotations=[],this._vertexCircleMarkers=[],this._measureFeatures=[],this._initLayout(),e.on("click",this._collapse,this),this._layer=t.layerGroup().addTo(e),this._container},onRemove:function(t){t.off("click",this._collapse,this),t.removeLayer(this._layer)},_initLayout:function(){var e=this._className,n=this._container=t.DomUtil.create("div",e+" leaflet-bar");n.innerHTML=p({model:{className:e}}),n.setAttribute("aria-haspopup",!0),t.DomEvent.disableClickPropagation(n),t.DomEvent.disableScrollPropagation(n);var r=this.$toggle=u(".js-toggle",n);this.$interaction=u(".js-interaction",n);var o=u(".js-start",n),i=u(".js-cancel",n),s=u(".js-undo",n),a=u(".js-finish",n);this.$startPrompt=u(".js-startprompt",n),this.$measuringPrompt=u(".js-measuringprompt",n),this.$startHelp=u(".js-starthelp",n),this.$results=u(".js-results",n),this.$measureTasks=u(".js-measuretasks",n),this._collapse(),this._updateMeasureNotStarted(),t.Browser.android||(t.DomEvent.on(n,"mouseenter",this._expand,this),t.DomEvent.on(n,"mouseleave",this._collapse,this)),t.DomEvent.on(r,"click",t.DomEvent.stop),t.Browser.touch?t.DomEvent.on(r,"click",this._expand,this):t.DomEvent.on(r,"focus",this._expand,this),t.DomEvent.on(o,"click",t.DomEvent.stop),t.DomEvent.on(o,"click",this._startMeasure,this),t.DomEvent.on(i,"click",t.DomEvent.stop),t.DomEvent.on(i,"click",this._finishMeasure,this),t.DomEvent.on(s,"click",t.DomEvent.stop),t.DomEvent.on(s,"click",this._undoMeasure,this),t.DomEvent.on(a,"click",t.DomEvent.stop),t.DomEvent.on(a,"click",this._handleMeasureDoubleClick,this)},_expand:function(){i(this.$toggle),s(this.$interaction)},_collapse:function(){this._locked||(i(this.$interaction),s(this.$toggle))},_updateMeasureNotStarted:function(){i(this.$startHelp),i(this.$results),i(this.$measureTasks),i(this.$measuringPrompt),s(this.$startPrompt)},_updateMeasureStartedNoPoints:function(){i(this.$results),s(this.$startHelp),s(this.$measureTasks),i(this.$startPrompt),s(this.$measuringPrompt)},_updateMeasureStartedWithPoints:function(){i(this.$startHelp),s(this.$results),s(this.$measureTasks),i(this.$startPrompt),s(this.$measuringPrompt)},_startMeasure:function(){this._locked=!0,this._measureLengths=t.featureGroup().addTo(this._layer),this._measureVertexes=t.featureGroup().addTo(this._layer),this._captureMarker=t.marker(this._map.getCenter(),{clickable:!0,zIndexOffset:this.options.captureZIndex,opacity:0}).addTo(this._layer),this._setCaptureMarkerIcon(),this._captureMarker.on("mouseout",this._handleMapMouseOut,this).on("dblclick",this._handleMeasureDoubleClick,this).on("click",this._handleMeasureClick,this),this._map.on("mousemove",this._handleMeasureMove,this).on("mouseout",this._handleMapMouseOut,this).on("move",this._centerCaptureMarker,this).on("resize",this._setCaptureMarkerIcon,this),t.DomEvent.on(this._container,"mouseenter",this._handleMapMouseOut,this),this._updateMeasureStartedNoPoints(),this._map.fire("measurestart",null,!1)},_undoMeasure:function(){this._latlngs=this._latlngs.slice(0,-1),this._removeLastLengthNotation(),this._removeLastVertex(),this._latlngs.length>0&&(this._addMeasureArea(this._latlngs),this._addMeasureBoundary(this._latlngs),this._updateResults()),0===this._latlngs.length&&this._updateMeasureStartedNoPoints()},_finishMeasure:function(e){var n;n=!0!==e;var r=Object.assign({},this._resultsModel,{points:this._latlngs});this._locked=!1,t.DomEvent.off(this._container,"mouseover",this._handleMapMouseOut,this),this._clearMeasure(n),this._captureMarker.off("mouseout",this._handleMapMouseOut,this).off("dblclick",this._handleMeasureDoubleClick,this).off("click",this._handleMeasureClick,this),this._map.off("mousemove",this._handleMeasureMove,this).off("mouseout",this._handleMapMouseOut,this).off("move",this._centerCaptureMarker,this).off("resize",this._setCaptureMarkerIcon,this),this._layer.removeLayer(this._measureVertexes).removeLayer(this._captureMarker),this._measureVertexes=null,this._updateMeasureNotStarted(),this._collapse(),this._map.fire("measurefinish",r,!1)},_clearMeasure:function(t){this._latlngs=[],this._resultsModel=null,t&&this._measureLengths.clearLayers(),this._measureVertexes.clearLayers(),this._measureDrag&&this._layer.removeLayer(this._measureDrag),this._measureArea&&this._layer.removeLayer(this._measureArea),this._measureBoundary&&this._layer.removeLayer(this._measureBoundary),this._measureDrag=null,this._measureArea=null,this._measureBoundary=null},_centerCaptureMarker:function(){this._captureMarker.setLatLng(this._map.getCenter())},_setCaptureMarkerIcon:function(){this._captureMarker.setIcon(t.divIcon({iconSize:this._map.getSize().multiplyBy(2)}))},_getMeasurementDisplayStrings:function(t){var e=this.options.units;return{lengthDisplay:n(t.length,this.options.primaryLengthUnit,this.options.secondaryLengthUnit,this.options.decPoint,this.options.thousandsSep),areaDisplay:n(t.area,this.options.primaryAreaUnit,this.options.secondaryAreaUnit,this.options.decPoint,this.options.thousandsSep)};function n(t,n,o,i,s){var a;return n&&e[n]?(a=r(0,e[n]),a=o&&e[o]?a+" ("+r(0,e[o])+")":r(0,null)):r(0,null)}function r(t,e,n,r){var o=e.display;return[formattedNumber,{acres:"Acres",feet:"Feet",kilometers:"Kilometers",hectares:"Hectares",meters:"Meters",miles:"Miles",sqfeet:"Sq Feet",sqmeters:"Sq Meters",sqmiles:"Sq Miles"}[o]||o].join(" ")}},_getShorterMeasurementDisplayStrings:function(t){var e=this.options.units;return{lengthDisplay:n(t.length,this.options.primaryLengthUnit,this.options.secondaryLengthUnit,".",this.options.thousandsSep),areaDisplay:n(t.area,this.options.primaryAreaUnit,this.options.secondaryAreaUnit,this.options.decPoint,this.options.thousandsSep)};function n(t,n,o,i,s){var a;return n?(a=r(t,e[n]),o&&e[o]&&(a=a+" ("+r(t,e[o])+")")):a=r(t,null),a}function r(t,e,n,r){var o=Object.assign({factor:1,decimals:2},e);return d(t*o.factor,o.decimals)}},_updateResults:function(){var t=a(this._latlngs),e=this._resultsModel=Object.assign({},t,this._getShorterMeasurementDisplayStrings(t),{pointCount:this._latlngs.length,points:this._latlngs,lengths:this._lengths});this.$results.innerHTML=m({model:e})},_handleMeasureMove:function(e){this._measureDrag?this._measureDrag.setLatLng(e.latlng):this._measureDrag=t.circleMarker(e.latlng,this._symbols.getSymbol("measureDrag")).addTo(this._layer),this._measureDrag.bringToFront()},_handleMeasureDoubleClick:function(){var e=this._latlngs,n=t.layerGroup();n.addTo(this._layer),this._measureFeatures.push(n),this._measureLengths.removeFrom(this._layer),this._measureLengths.addTo(n),this._finishMeasure(!0);for(var r=[],o=0;o<this._lengths.length;o++)r[o]=this._lengths[o];if(e.length){if(e.length>2){e.push((e||[])[0]);var i=e.length,s=e[i-2],l=e[i-1],c=t.latLngBounds(s,l).getCenter(),d=a([s,l]);this._addNewLengthNotation(c,d).addTo(this._measureLengths);var h=this._lengths.length;r[h-1]=this._lengths[h-1]}var p,m,v,b,_,x=a(e);if(1===e.length)p=t.circleMarker(e[0],this._symbols.getSymbol("resultPoint")),m=f({model:x});else if(2===e.length)p=t.polyline(e,this._symbols.getSymbol("resultLine")),m=g({model:Object.assign({},x,this._getShorterMeasurementDisplayStrings(x))});else{p=t.polygon(e,this._symbols.getSymbol("resultArea"));var C=Object.assign({},x,this._getShorterMeasurementDisplayStrings(x),{pointCount:e.length,points:e,lengths:this._lengths});m=y({model:C})}this._lengths=[],this._vertexCircleMarkers=[],(v=t.DomUtil.create("div","")).innerHTML=m,(b=u(".js-zoomto",v))&&(t.DomEvent.on(b,"click",t.DomEvent.stop),t.DomEvent.on(b,"click",function(){p.getBounds?this._map.fitBounds(p.getBounds(),{padding:[20,20],maxZoom:17}):p.getLatLng&&this._map.panTo(p.getLatLng())},this)),(_=u(".js-deletemarkup",v))&&(t.DomEvent.on(_,"click",t.DomEvent.stop),t.DomEvent.on(_,"click",function(){var t=this._measureFeatures.indexOf(n);this._measureFeatures[t].removeFrom(this._layer)},this)),p.addTo(n),p.bindPopup(v,this.options.popupOptions),p.getBounds?p.openPopup(p.getBounds().getCenter()):p.getLatLng&&p.openPopup(p.getLatLng())}},_handleMeasureClick:function(e){var n=this._map.mouseEventToLatLng(e.originalEvent),r=(this._latlngs||[]).slice(-1)[0],o=(this._latlngs||[])[0],i=this._symbols.getSymbol("measureVertex");if(!r||!n.equals(r)){if(this._latlngs.push(n),this._addMeasureArea(this._latlngs),this._addMeasureBoundary(this._latlngs),this._measureVertexes.eachLayer(function(t){t.setStyle(i),t._path&&t._path.setAttribute("class",i.className)}),this._addNewVertex(n),o){var s=this._latlngs.length,l=this._latlngs[s-2],c=t.latLngBounds(l,n).getCenter(),u=a([l,n]);this._addNewLengthNotation(c,u).addTo(this._measureLengths)}this._measureBoundary&&this._measureBoundary.bringToFront(),this._measureVertexes.bringToFront()}this._updateResults(),this._updateMeasureStartedWithPoints()},_addNewLengthNotation:function(e,n){var r=this._getShorterMeasurementDisplayStrings(n),o=t.divIcon({className:"my-div-icon",html:r.lengthDisplay}),i=t.marker(e,{icon:o});return this._lengths.push(r.lengthDisplay),this._lengthNotations.push(i),i},_removeLastLengthNotation:function(){var t=this._lengthNotations.length;this._lengthNotations.length>0&&this._lengthNotations[t-1].removeFrom(this._measureLengths),this._lengthNotations=this._lengthNotations.slice(0,-1),this._lengths=this._lengths.slice(0,-1)},_handleMapMouseOut:function(){this._measureDrag&&(this._layer.removeLayer(this._measureDrag),this._measureDrag=null)},_addNewVertex:function(e){var n=t.circleMarker(e,this._symbols.getSymbol("measureVertexActive"));this._vertexCircleMarkers.push(n),n.addTo(this._measureVertexes)},_removeLastVertex:function(){var t=this._vertexCircleMarkers.length;this._vertexCircleMarkers.length>0&&this._vertexCircleMarkers[t-1].removeFrom(this._measureVertexes),this._vertexCircleMarkers=this._vertexCircleMarkers.slice(0,-1)},_addMeasureArea:function(e){e.length<3?this._measureArea&&(this._layer.removeLayer(this._measureArea),this._measureArea=null):this._measureArea?this._measureArea.setLatLngs(e):this._measureArea=t.polygon(e,this._symbols.getSymbol("measureArea")).addTo(this._layer)},_addMeasureBoundary:function(e){e.length<2?this._measureBoundary&&(this._layer.removeLayer(this._measureBoundary),this._measureBoundary=null):this._measureBoundary?this._measureBoundary.setLatLngs(e):this._measureBoundary=t.polyline(e,this._symbols.getSymbol("measureBoundary")).addTo(this._layer)}})}(n(0),n(460),n(367),n(368))},function(t,e,n){"use strict";n.r(e);var r=n(328);var o=6378137;function i(t){var e=0;if(t&&t.length>0){e+=Math.abs(s(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(s(t[n]))}return e}function s(t){var e,n,r,i,s,l,c=0,u=t.length;if(u>2){for(l=0;l<u;l++)l===u-2?(r=u-2,i=u-1,s=0):l===u-1?(r=u-1,i=0,s=1):(r=l,i=l+1,s=l+2),e=t[r],n=t[i],c+=(a(t[s][0])-a(e[0]))*Math.sin(a(n[1]));c=c*o*o/2}return c}function a(t){return t*Math.PI/180}e.default=function(t){return Object(r.a)(t,function(t,e){return t+function t(e){var n,r=0;switch(e.type){case"Polygon":return i(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)r+=i(e.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)r+=t(e.geometries[n]);return r}}(e)},0)}},function(t,e,n){var r=n(369),o=n(398),i=n(401),s=n(402),a=n(403),l=n(342),c=n(336),u=n(404),d=n(345),h=n(407),p=n(346),m=/\b__p \+= '';/g,f=/\b(__p \+=) '' \+/g,g=/(__e\(.*?\)|\b__t\)) \+\n'';/g,y=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,v=/($^)/,b=/['\n\r\u2028\u2029\\]/g;t.exports=function(t,e,n){var _=h.imports._.templateSettings||h;n&&c(t,e,n)&&(e=void 0),t=p(t),e=r({},e,_,s);var x,C,w=r({},e.imports,_.imports,s),k=u(w),$=i(w,k),M=0,S=e.interpolate||v,j="__p += '",E=RegExp((e.escape||v).source+"|"+S.source+"|"+(S===d?y:v).source+"|"+(e.evaluate||v).source+"|$","g"),O="sourceURL"in e?"//# sourceURL="+e.sourceURL+"\n":"";t.replace(E,function(e,n,r,o,i,s){return r||(r=o),j+=t.slice(M,s).replace(b,a),n&&(x=!0,j+="' +\n__e("+n+") +\n'"),i&&(C=!0,j+="';\n"+i+";\n__p += '"),r&&(j+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),M=s+e.length,e}),j+="';\n";var T=e.variable;T||(j="with (obj) {\n"+j+"\n}\n"),j=(C?j.replace(m,""):j).replace(f,"$1").replace(g,"$1;"),j="function("+(T||"obj")+") {\n"+(T?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(x?", __e = _.escape":"")+(C?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+j+"return __p\n}";var F=o(function(){return Function(k,O+"return "+j).apply(void 0,$)});if(F.source=j,l(F))throw F;return F}},function(t,e,n){var r=n(370),o=n(380),i=n(386),s=o(function(t,e,n,o){r(e,i(e),t,o)});t.exports=s},function(t,e,n){var r=n(371),o=n(329);t.exports=function(t,e,n,i){var s=!n;n||(n={});for(var a=-1,l=e.length;++a<l;){var c=e[a],u=i?i(n[c],t[c],c,n,t):void 0;void 0===u&&(u=t[c]),s?o(n,c,u):r(n,c,u)}return n}},function(t,e,n){var r=n(329),o=n(295),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var s=t[e];i.call(t,e)&&o(s,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(373),o=n(379);t.exports=function(t,e){var n=o(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(331),o=n(376),i=n(282),s=n(378),a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,h=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(r(t)?h:a).test(s(t))}},function(t,e,n){var r=n(293),o=Object.prototype,i=o.hasOwnProperty,s=o.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(t){}var o=s.call(t);return r&&(e?t[a]=n:delete t[a]),o}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(377),o=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!o&&o in t}},function(t,e,n){var r=n(294)["__core-js_shared__"];t.exports=r},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(333),o=n(336);t.exports=function(t){return r(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=t.length>3&&"function"==typeof s?(i--,s):void 0,a&&o(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var l=n[r];l&&t(e,l,r,s)}return e})}},function(t,e,n){var r=n(335),o=Math.max;t.exports=function(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var i=arguments,s=-1,a=o(i.length-e,0),l=Array(a);++s<a;)l[s]=i[e+s];s=-1;for(var c=Array(e+1);++s<e;)c[s]=i[s];return c[e]=n(l),r(t,this,c)}}},function(t,e,n){var r=n(383),o=n(385)(r);t.exports=o},function(t,e,n){var r=n(384),o=n(330),i=n(334),s=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:i;t.exports=s},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var n=800,r=16,o=Date.now;t.exports=function(t){var e=0,i=0;return function(){var s=o(),a=r-(s-i);if(i=s,a>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var r=n(339),o=n(396),i=n(296);t.exports=function(t){return i(t)?r(t,!0):o(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(389),o=n(274),i=Object.prototype,s=i.hasOwnProperty,a=i.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(t){return o(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=l},function(t,e,n){var r=n(273),o=n(274),i="[object Arguments]";t.exports=function(t){return o(t)&&r(t)==i}},function(t,e,n){(function(t){var r=n(294),o=n(391),i=e&&!e.nodeType&&e,s=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===i?r.Buffer:void 0,l=(a?a.isBuffer:void 0)||o;t.exports=l}).call(this,n(103)(t))},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(393),o=n(394),i=n(395),s=i&&i.isTypedArray,a=s?o(s):r;t.exports=a},function(t,e,n){var r=n(273),o=n(337),i=n(274),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!s[r(t)]}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var r=n(332),o=e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=i&&i.exports===o&&r.process,a=function(){try{var t=i&&i.require&&i.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=a}).call(this,n(103)(t))},function(t,e,n){var r=n(282),o=n(341),i=n(397),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=o(t),n=[];for(var a in t)("constructor"!=a||!e&&s.call(t,a))&&n.push(a);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var r=n(335),o=n(333),i=n(342),s=o(function(t,e){try{return r(t,void 0,e)}catch(t){return i(t)?t:new Error(t)}});t.exports=s},function(t,e,n){var r=n(273),o=n(400),i=n(274),s="[object Object]",a=Function.prototype,l=Object.prototype,c=a.toString,u=l.hasOwnProperty,d=c.call(Object);t.exports=function(t){if(!i(t)||r(t)!=s)return!1;var e=o(t);if(null===e)return!0;var n=u.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==d}},function(t,e,n){var r=n(343)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(344);t.exports=function(t,e){return r(e,function(e){return t[e]})}},function(t,e,n){var r=n(295),o=Object.prototype,i=o.hasOwnProperty;t.exports=function(t,e,n,s){return void 0===t||r(t,o[n])&&!i.call(s,n)?e:t}},function(t,e){var n={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};t.exports=function(t){return"\\"+n[t]}},function(t,e,n){var r=n(339),o=n(405),i=n(296);t.exports=function(t){return i(t)?r(t):o(t)}},function(t,e,n){var r=n(341),o=n(406),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=[];for(var n in Object(t))i.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var r=n(343)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(408),o={escape:n(413),evaluate:n(414),interpolate:n(345),variable:"",imports:{_:{escape:r}}};t.exports=o},function(t,e,n){var r=n(409),o=n(346),i=/[&<>"']/g,s=RegExp(i.source);t.exports=function(t){return(t=o(t))&&s.test(t)?t.replace(i,r):t}},function(t,e,n){var r=n(410)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});t.exports=r},function(t,e){t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},function(t,e,n){var r=n(293),o=n(344),i=n(340),s=n(412),a=1/0,l=r?r.prototype:void 0,c=l?l.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(s(e))return c?c.call(e):"";var n=e+"";return"0"==n&&1/e==-a?"-0":n}},function(t,e,n){var r=n(273),o=n(274),i="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||o(t)&&r(t)==i}},function(t,e){t.exports=/<%-([\s\S]+?)%>/g},function(t,e){t.exports=/<%([\s\S]+?)%>/g},function(t,e,n){"use strict";var r=n(297);n.n(r).a},function(t,e,n){(t.exports=n(16)(!1)).push([t.i,"\n.legend {\r\n  display: inline-block;\r\n  padding: 6px 8px;\r\n  font: 14px/16px Arial, Helvetica, sans-serif;\r\n  background: white;\r\n  background: rgba(255,255,255,1);\r\n  box-shadow: 0 0 15px rgba(0,0,0,0.2);\r\n  border-radius: 5px;\r\n  line-height: 18px;\r\n  color: #555;\n}\n.legend-box {\r\n  display: inline-block;\r\n  width: 18px;\r\n  height: 18px;\r\n  opacity: 1;\r\n  vertical-align: middle;\r\n  margin-right: 4px;\n}\n.list-text {\r\n  display: inline-block;\r\n  vertical-align: middle;\n}\n.legend-list {\r\n  list-style: none;\r\n  padding-top: 2px;\r\n  padding-left: 2px;\r\n  margin-left: 0px;\r\n  /*override standards*/\r\n  margin-bottom: 0;\n}\r\n",""])},function(t,e,n){"use strict";var r=n(299);n.n(r).a},function(t,e,n){(t.exports=n(16)(!1)).push([t.i,"\n.pvm-search-control-form[data-v-3fdac0f0] {\r\n  display: inline-block;\n}\r\n\r\n/* Container */\n.pvm-search-control-container[data-v-3fdac0f0] {\r\n  display: inline-block;\r\n  border-radius: 2px;\r\n  box-shadow:0 2px 4px rgba(0,0,0,0.2),0 -1px 0px rgba(0,0,0,0.02);\r\n  width: 305px;\n}\n.pvm-container-non-mobile[data-v-3fdac0f0] {\r\n  height: 48px;\n}\n.pvm-container-mobile[data-v-3fdac0f0] {\r\n  height: 38px;\n}\r\n\r\n\r\n/* Input */\n.pvm-search-control-input[data-v-3fdac0f0] {\r\n  display: inline-block;\r\n  border: 0;\r\n  padding: 15px;\r\n  font-family: 'Montserrat', 'Tahoma', sans-serif;\r\n  font-size: 16px;\r\n  width: 250px;\n}\n.pvm-input-non-mobile[data-v-3fdac0f0] {\r\n  height: 48px;\n}\n.pvm-input-mobile[data-v-3fdac0f0] {\r\n  height: 38px;\n}\r\n\r\n\r\n/* Button */\n.pvm-search-control-button[data-v-3fdac0f0] {\r\n  display: inline-block;\r\n  color: #fff;\r\n  background: #2176d2;\r\n  padding: 0px;\r\n  width: 50px;\n}\n.pvm-button-non-mobile[data-v-3fdac0f0] {\r\n  height: 48px;\r\n  line-height: 48px;\n}\n.pvm-button-mobile[data-v-3fdac0f0] {\r\n  height: 38px;\r\n  line-height: 38px;\r\n  padding-top: 1px;\n}\r\n\r\n\r\n",""])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);var r=n(281);function o(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}var i=function(t,e,n){if(n=n||{},!Object(r.d)(n))throw new Error("options is invalid");var i=n.units,s=o(t),a=o(e),l=Object(r.a)(a[1]-s[1]),c=Object(r.a)(a[0]-s[0]),u=Object(r.a)(s[1]),d=Object(r.a)(a[1]),h=Math.pow(Math.sin(l/2),2)+Math.pow(Math.sin(c/2),2)*Math.cos(u)*Math.cos(d);return Object(r.g)(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),i)},s=n(328);e.default=function(t,e){if(e=e||{},!Object(r.d)(e))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return Object(s.b)(t,function(t,n){var r=n.geometry.coordinates;return t+i(r[0],r[1],e)},0)}},,,,,,,function(t,e,n){"use strict";n.r(e);var r=[function(){var t=this.$createElement;return(this._self._c||t)("full-screen-map-toggle-tab")},function(){var t=this.$createElement;return(this._self._c||t)("basemap-toggle-control",{attrs:{position:"topright"}})},function(){var t=this.$createElement;return(this._self._c||t)("div",[this.shouldShowImageryToggle?this._m(1):this._e()],1)},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("basemap-select-control",{attrs:{position:this.basemapSelectControlPosition}})],1)},function(){var t=this.$createElement;return(this._self._c||t)("pictometry-button",{attrs:{position:"topright",link:"pictometry",imgSrc:"images/pictometry.png"}})},function(){var t=this.$createElement;return(this._self._c||t)("div",[this.shouldShowPictometryButton?this._m(4):this._e()],1)},function(){var t=this.$createElement;return(this._self._c||t)("cyclomedia-button",{attrs:{position:"topright",link:"cyclomedia",imgSrc:"images/cyclomedia.png"},on:{click:this.handleCyclomediaButtonClick}})},function(){var t=this.$createElement;return(this._self._c||t)("div",[this.shouldShowCyclomediaButton?this._m(6):this._e()],1)},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("measure-control",{attrs:{position:"bottomleft"}})],1)},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(Object.keys(t.legendControls),function(e){return n("legend-control",{key:e,attrs:{position:"bottomleft",options:t.legendControls[e].options,items:t.legendControls[e].data}})}),1)},function(){var t=this.$createElement;return(this._self._c||t)("location-control",{attrs:{position:"bottomright"}})},function(){var t=this.$createElement;return(this._self._c||t)("div",[this.geolocationEnabled?this._m(10):this._e()],1)},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("map-address-input",{attrs:{position:this.addressInputPosition,placeholder:this.addressInputPlaceholder,widthFromConfig:this.addressInputWidth}})],1)}],o=n(0),i=n.n(o),s={watch:{activeFeature(t,e){const n=this.$store.state.map.map._layers,r=Object.values(n);let o,i,s,a,l,c,u;e&&e.tableId&&e.featureId&&(s=(o=e).tableId,a=o.featureId,u=r.filter(t=>{const e=(t.options||{}).data;if(!e)return;const n=e.featureId,r=e.tableId;return n===a&&r===s})[0],this.updateMarkerFillColor(u)),t&&t.tableId&&t.featureId&&(s=(i=t).tableId,l=i.featureId,c=r.filter(t=>{const e=(t.options||{}).data;if(!e)return;const n=e.featureId,r=e.tableId;return n===l&&r===s})[0],this.updateMarkerFillColor(c),this.bringMarkerToFront(c))}},computed:{locationMarker(){return{latlng:[this.$store.state.map.location.lat,this.$store.state.map.location.lng],radius:6,fillColor:"#ff3f3f",color:"#ff0000",weight:1,opacity:1,fillOpacity:1}},markersForAddress(){const t=[],e=this.geocodeGeom;if("address-marker"===this.identifyFeature&&e){const n={latlng:[...e.coordinates].reverse(),key:this.geocodeResult.properties.street_address,color:"#2176d2",markerType:"geocode",icon:{prefix:"fas",icon:"map-marker-alt",shadow:!0,size:50}};t.push(n)}return t},markersForTopic(){const t=[],e=this.activeTopicConfig.markersForTopic;if(e){const n=this.$store.state,r=e.data(n);if(null!==r){const n={latlng:[r[e.lat],r[e.lng]],key:r[e.key],color:e.color||"green",markerType:"overlay",icon:e.icon};t.push(n)}}return t},reactiveCircleMarkers(){const t=this.$store.state.horizontalTables.filteredData;let e=[];const n=this.$store.getters.visibleTableIds;for(let r of n){const n=((this.getConfigForTable(r)||{}).options||{}).mapOverlay;if(!n||"circle"!==n.marker)continue;const o=t[r];if(o.length<1)continue;const i=n.style;for(let t of o){let n;if(t.geometry){const[e,r]=t.geometry.coordinates;n=[r,e]}else t.lat&&(n=[t.lat,t.lng]);let o=Object.assign({},i);o.latlng=n,o.featureId=t._featureId,o.tableId=r,e.push(o)}}return e},geojsonParcels(){const t=[],e=this.identifyFeature,n=this.activeParcelLayer;if("pwd-parcel"===e&&"pwd"===n&&this.pwdParcel){let e={};e.geojson=this.pwdParcel,e.color="blue",e.fillColor="blue",e.weight=2,e.opacity=1,e.fillOpacity=.3,e.key=e.geojson.properties.PARCELID,t.push(e)}else if("dor-parcel"===e&&"dor"===n){const e=this.dorParcels.map(t=>{let e={};return e.geojson=t,e.color="blue",e.fillColor="blue",e.weight=2,e.opacity=1,e.fillOpacity=.3,e.key=t.properties.OBJECTID,e});t.push.apply(t,e)}return t},geojsonForTopic(){const t=[],e=this.activeTopicConfig.geojsonForTopic;if(e){const n=this.$store.state,r=e.data(n);if(null!==r)for(let n of r){let r=Object.assign({},e.style);r.key=n[e.key],r.geojson=n,t.push(r)}}return t},reactiveGeojsonFeatures(){const t=[],e=this.$store.state.horizontalTables.filteredData,n=this.$store.getters.visibleTableIds;for(let r of n){const n=((this.getConfigForTable(r)||{}).options||{}).mapOverlay;if(!n||"geojson"!==n.marker)continue;const o=e[r];if(o.length<1)continue;const i=n.style;o.push(r);for(let e of o){let n=Object.assign({},i);n.geojson=e.geometry,n.key=e.id,n.featureId=e._featureId||null,n.tableId=o[o.length-1],t.push(n)}}return t},leafletMarkers(){const t=[];return t.push.apply(t,this.markers),t.push.apply(t,this.geojsonParcels),t}},methods:{getTableFromComps:(t,e)=>(t.filter(t=>"horizontal-table"===t.type&&t._id==e)||[])[0],getConfigForTable(t){const e=this.$config.topics||[];for(let n of e){const e=n.components||[],r=this.getTableFromComps(e,t);if(r)return r;for(let n of e){const e=n.options||{},r=e.components||e.tables||[];if(r.length>0){const e=this.getTableFromComps(r,t);if(e)return e}}}},bringMarkerToFront(t){const e=t._path,n=t._renderer._rootGroup;n.removeChild(e),n.appendChild(e)},handleMarkerMouseover(t){if(!this.isMobileOrTablet){const{target:e}=t,{featureId:n,tableId:r}=e.options.data;this.$store.commit("setActiveFeature",{featureId:n,tableId:r})}},handleMarkerClick(t){if(this.isMobileOrTablet){const{target:e}=t,{featureId:n,tableId:r}=e.options.data;this.$store.commit("setActiveFeature",{featureId:n,tableId:r})}},handleMarkerMouseout(t){const{target:e}=t;this.$store.commit("setActiveFeature",null)},updateMarkerFillColor(t){const{featureId:e,tableId:n}=t.options.data,r=this.fillColorForOverlayMarker(e,n),o=Object.assign({},t.options);o.fillColor=r,t.setStyle(o)}}},a={name:"cyclomediaMixin",computed:{cyclomediaActive(){return this.$store.state.cyclomedia.active},cyclomediaRecordings(){return this.$store.state.cyclomedia.recordings}},methods:{handleCyclomediaButtonClick(){this.updateCyclomediaRecordings()},handleCyclomediaRecordingClick(t){const e=t.latlng;console.log("handleCyclomediaRecordingClick is running, latlng:",e),this.$store.commit("setCyclomediaLatLngFromMap",e)},updateCyclomediaRecordings(){const t=this.$store.state.map.map,e=t.getZoom();if(!this.$store.state.cyclomedia.active||e<=18)return void this.$store.commit("setCyclomediaRecordings",[]);const n=t.getBounds();this.$cyclomediaRecordingsClient.getRecordings(n,t=>{this.$store.commit("setCyclomediaRecordings",t)})}}},l={name:"pictometryMixin",computed:{pictometryActive(){return this.$store.state.pictometry.active}}},c=n(327),u=n.n(c),d=n(18),h=n.n(d);var p=class{constructor(t,e,n,r=3857,o){this.baseUrl=t,this.username=e,this.password=n,this.srid=r,this.proxy=o}getRecordings(t,e){const n=t.getSouthWest(),r=t.getNorthEast(),o=`<wfs:GetFeature service="WFS" version="1.1.0" resultType="results" outputFormat="text/xml; subtype=gml/3.1.1" xmlns:wfs="http://www.opengis.net/wfs">\n\t\t\t\t\t\t\t\t\t\t\t<wfs:Query typeName="atlas:Recording" srsName="EPSG:${this.srid}" xmlns:atlas="http://www.cyclomedia.com/atlas">\n\t\t\t\t\t\t\t\t\t\t\t\t<ogc:Filter xmlns:ogc="http://www.opengis.net/ogc">\n\t\t\t\t\t\t    \t\t\t\t\t<ogc:And>\n\t\t\t\t\t\t      \t\t\t\t\t<ogc:BBOX>\n\t\t\t\t\t\t\t\t\t\t\t        <gml:Envelope srsName="EPSG:${this.srid}" xmlns:gml="http://www.opengis.net/gml">\n\t\t\t\t\t\t\t\t\t\t\t          <gml:lowerCorner>${n.lng} ${n.lat}</gml:lowerCorner>\n\t\t\t\t\t\t\t\t\t\t\t          <gml:upperCorner>${r.lng} ${r.lat}</gml:upperCorner>\n\t\t\t\t\t\t\t\t\t\t\t        </gml:Envelope>\n\t\t\t\t\t\t\t\t\t\t\t      </ogc:BBOX>\n\t\t\t\t\t\t\t\t\t\t\t      <ogc:PropertyIsNull>\n\t\t\t\t\t\t\t\t\t\t\t        <ogc:PropertyName>expiredAt</ogc:PropertyName>\n\t\t\t\t\t\t\t\t\t\t\t      </ogc:PropertyIsNull>\n\t\t\t\t\t\t\t\t\t\t\t    </ogc:And>\n\t\t\t\t\t\t\t\t\t\t\t  </ogc:Filter>\n\t\t\t\t\t\t\t\t\t\t\t </wfs:Query>\n\t\t\t\t\t\t\t\t\t\t\t</wfs:GetFeature>`,i=(this.proxy||"")+this.baseUrl;u.a.ajax({url:i,data:o,type:"POST",contentType:"text/xml",headers:{Authorization:"Basic "+window.btoa(this.username+":"+this.password)},success(t){console.log("got recordings",t);const n=t.getElementsByTagNameNS("*","Recording"),r=[].slice.call(n);if(r.length<1)return void console.log("no cyclomedia recordings for bounds");const o=r.map(t=>{const e=t.getElementsByTagNameNS("*","imageId")[0].firstChild.data,n=t.getElementsByTagNameNS("*","pos")[0].firstChild.data,[r,o]=n.split(" ").map(parseFloat);return{imageId:e,lng:r,lat:o}});e(o)},error(t,e,n){console.log(t.status),console.log(n)}})}},m={name:"ControlCorner",props:["vSide","hSide"],render(t){},methods:{parentMounted(t){const e=t.$leafletElement;e._controlCorners[this.vSide+this.hSide]=o.DomUtil.create("div","leaflet-"+this.vSide+" leaflet-"+this.hSide,e._controlContainer)}}},f=(n(354),n(37)),g=Object(f.a)(m,void 0,void 0,!1,null,null,null).exports,y={name:"FullScreenMapToggleTab",data:()=>({divHeight:0,buttonPosition:0}),mounted(){window.addEventListener("resize",this.setDivHeight),this.setDivHeight()},computed:{fullScreenMapEnabled(){return this.$store.state.fullScreenMapEnabled},fullScreenTopicsEnabled(){return this.$store.state.fullScreenTopicsEnabled},isMobileOrTablet(){return this.$store.state.isMobileOrTablet},cyclomediaActive(){return this.$store.state.cyclomedia.active},pictometryActive(){return this.$store.state.pictometry.active},picOrCycloActive(){return!(!this.cyclomediaActive&&!this.pictometryActive)},currentIcon(){return this.fullScreenMapEnabled?"caret-right":"caret-left"}},watch:{picOrCycloActive(t){this.setDivHeight()},fullScreenTopicsEnabled(){this.setDivHeight()}},methods:{setDivHeight(){const t=document.getElementById("map-tag"),e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("height").replace("px",""));this.buttonPosition=(n-48)/2+"px"},handleFullScreenMapToggleButtonClick(t){const e=!this.$store.state.fullScreenMapEnabled;this.$store.commit("setFullScreenMapEnabled",e)}}},v=(n(356),Object(f.a)(y,function(){var t=this.$createElement,e=this._self._c||t;return this.isMobileOrTablet?this._e():e("div",{staticClass:"toggle-tab",style:{top:this.buttonPosition},attrs:{id:"toggle-tab"},on:{click:this.handleFullScreenMapToggleButtonClick}},[e("span",{staticClass:"align-span"},[e("font-awesome-icon",{staticClass:"fa-2x",attrs:{icon:this.currentIcon}})],1)])},[],!1,null,"8c11c8ec",null).exports),b=n(280),_={name:"Map_",props:["center","zoom","zoomControlPosition","minZoom","maxZoom"],mounted(){const t=this.$leafletElement=this.createLeafletElement();t.zoomControl.setPosition(this.$props.zoomControlPosition),this.$store.commit("setMap",{map:t}),this.setMapView(this.center),this.$nextTick(()=>{t.attributionControl.setPrefix('<a target="_blank" href="//www.phila.gov/it/aboutus/units/Pages/GISServicesGroup.aspx">City of Philadelphia | CityGeo</a>')});for(let t of this.$children)t.parentMounted(this,t.$props);Object(b.a)(this,this.$leafletElement,this._events),this.$config.map.clickToIdentifyFeatures&&t.on("click",this.identifyFeatures)},watch:{center(t){this.setMapView(t)},zoom(t){t&&(this.$leafletElement.setZoom(t),this.$store.commit("setMapZoom",t))},mapBounds(t){console.log("watch nextBounds is firing, nextBounds:",t,"this.$leafletElement:",this.$leafletElement),this.setMapBounds(t)},fullScreenMapEnabled(){this.$leafletElement.invalidateSize()},webMapDisplayedLayers(t){let e=[];for(let t of this.intersectingFeatures)e.push(t.feature.layerName);console.log("map.vue watch nextWebMapDisplayedLayers:",t,"intersectingLayers:",e);for(let n of e)if(!t.includes(n))return void this.$store.commit("setIntersectingFeatures",[])}},computed:{mapContainerClass(){return this.$config.map.containerClass?this.$config.map.containerClass:"map-container"},fullScreenMapEnabled(){return this.$store.state.fullScreenMapEnabled},mapBounds(){return this.$store.state.map.bounds},webMapDisplayedLayers(){return this.$store.state.map.webMapDisplayedLayers},intersectingFeatures(){return this.$store.state.map.intersectingFeatures}},methods:{createLeafletElement(){const{zoomControlPosition:t,...e}=this.$props;return new o.Map(this.$refs.map,e)},childDidMount(t){t.addTo(this.$leafletElement)},setMapView(t=[],e=this.zoom){if(0===t.length)return;const[n,r]=t,i=new o.LatLng(r,n);this.$leafletElement.setView(i,e)},setMapBounds(t){if(t._northEast){this.$leafletElement.fitBounds([[t._northEast.lat,t._northEast.lng],[t._southWest.lat,t._southWest.lng]])}},identifyFeatures(t){const e=this.$leafletElement,n=new o.LatLngBounds(t.latlng,t.latlng);let r,i=[];for(let a in e._layers){var s=e._layers[a];if(s._layers)for(let e in s._layers){const l=s._layers[e];if(l.feature){let e;"Polygon"===(r=l.feature.geometry.type)||"MultiPolygon"===r?l.contains(t.latlng)&&this.checkForDuplicates(a,l,i):"LineString"===r?(e=l.getBounds())&&n.intersects(e)&&this.checkForDuplicates(a,l,i):"Point"===r&&(e=new o.LatLngBounds(l._latlng,l._latlng))&&n.intersects(e)&&this.checkForDuplicates(a,l,i)}}}this.$store.commit("setPopupCoords",t.latlng),this.$store.commit("setIntersectingFeatures",i)},checkForDuplicates(t,e,n){let r=[];for(let e=0;e<n.length;e++)r[e]=t+"_"+n[e].feature.id;r.includes(t+"_"+e.feature.id)||n.push(e)}}},x=(n(358),Object(f.a)(_,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:this.mapContainerClass},[e("div",{ref:"map",staticClass:"map",attrs:{id:"map"}}),this._v(" "),e("div",[this._t("default")],2)])},[],!1,null,null,null).exports),C=n(272);const{props:w,methods:k}=C.default;var $={name:"LocationControl",props:["position"],data:()=>({locationOn:!1}),methods:Object.assign(k,{handleLocationButtonClick(t){this.$store.state.map.watchPositionOn?this.moveToPosition():(this.$store.commit("setWatchPositionOn",!0),navigator.geolocation.watchPosition(this.geofindSuccess,this.geofindError,{enableHighAccuracy:!0,timeout:1e3,maximumAge:0,distanceFilter:5}))},geofindSuccess(t){const e={lat:t.coords.latitude,lng:t.coords.longitude};this.$store.commit("setLocation",e),this.locationOn||(this.moveToPosition(),this.locationOn=!0)},moveToPosition(){const t=this.$store.state.map.map,e=this.$store.state.map.location;t.setView([e.lat,e.lng],19)},geofindError(){console.log("GeofindError")}})},M=Object(f.a)($,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"leaflet-bar easy-button-container leaflet-control"},[e("button",{on:{click:this.handleLocationButtonClick}},[e("span",{staticClass:"button-state state-unnamed-state unnamed-state-active"},[e("font-awesome-icon",{staticClass:"fa-lg",attrs:{icon:["far","dot-circle"]}})],1)])])},[],!1,null,"15eb5272",null).exports;const{props:S,methods:j}=C.default;var E={name:"BasemapToggleControl",props:["position"],computed:{toggleButtonImgSrc(){let t;return t=this.$store.state.map.shouldShowImagery?"images/basemap_small.png":"images/imagery_small.png"}},methods:Object.assign(j,{handleImageryToggleButtonClick(t){const e=!this.$store.state.map.shouldShowImagery;this.$store.commit("setShouldShowImagery",e)}})},O=(n(360),Object(f.a)(E,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"leaflet-bar easy-button-container leaflet-control"},[e("button",{on:{click:this.handleImageryToggleButtonClick}},[e("span",{staticClass:"button-state state-unnamed-state unnamed-state-active"},[e("img",{staticClass:"button-image",attrs:{src:this.toggleButtonImgSrc}})])])])},[],!1,null,"d4d27222",null).exports);const{props:T,methods:F}=C.default;var I={name:"BasemapSelectControl",props:["position"],computed:{shouldShowImagery(){return this.$store.state.map.shouldShowImagery},imageryTypes(){return this.$config.map.imageryTypes},currentImagery(){return this.$store.state.map.imagery}},watch:{currentImagery(t){const e=t.replace(/\D/g,"");document.getElementById("year-select").value=e}},methods:Object.assign(F,{handleImageryChange(){const t=document.getElementById("year-select"),e=t.options[t.selectedIndex].parentElement.label,n=t.options[t.selectedIndex].value,r=e.toLowerCase()+n;this.$store.commit("setImagery",r)},basemapsForImageryType(t){const e=this.$config.map.basemaps,n=Object.keys(e),r=[];for(let o of n){const n=e[o],i=n.type;if(i===t){const t=n.label;r.push({type:i,label:t})}}return r}})},L=Object(f.a)(I,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.shouldShowImagery,expression:"shouldShowImagery"}]},[n("select",{attrs:{id:"year-select"},on:{change:t.handleImageryChange}},t._l(t.imageryTypes,function(e,r){return n("optgroup",{attrs:{label:e.label}},t._l(t.basemapsForImageryType(r),function(e){return n("option",{attrs:{"data-key":e.key}},[t._v("\n        "+t._s(e.label)+"\n      ")])}),0)}),0)])},[],!1,null,"25790e29",null).exports,P={name:"PictometryButton",extends:C.default,props:["link","imgSrc"],computed:{pictometryActive(){return this.$store.state.pictometry.active?"active":"inactive"}},methods:{handleButtonClick(t){this.$store.commit("setPictometryActive",!this.$store.state.pictometry.active)}}},A=(n(362),Object(f.a)(P,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"leaflet-bar easy-button-container leaflet-control"},[n("button",{class:this.pictometryActive,on:{click:function(e){return e.preventDefault(),t.handleButtonClick(e)}}},[n("span",{staticClass:"button-state"},[n("img",{staticClass:"button-image",attrs:{src:t.imgSrc}})])])])},[],!1,null,"de1d88fe",null).exports),D={name:"CyclomediaButton",extends:C.default,props:["link","imgSrc"],created(){this.$cyclomediaRecordingsClient=new p(this.$config.cyclomedia.recordingsUrl,this.$config.cyclomedia.username,this.$config.cyclomedia.password,4326)},computed:{cyclomediaInitialized(){return this.$store.state.cyclomedia.initialized},cyclomediaActive(){return this.$store.state.cyclomedia.active?"active":"inactive"}},methods:{handleButtonClick(t){this.cyclomediaInitialized||this.$store.commit("setCyclomediaInitialized",!0);const e=!this.$store.state.cyclomedia.active;this.$store.commit("setCyclomediaActive",e)}}},B=(n(364),Object(f.a)(D,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"leaflet-bar easy-button-container leaflet-control"},[n("button",{staticClass:"cyclomedia-button",class:this.cyclomediaActive,on:{click:function(e){return e.preventDefault(),t.handleButtonClick(e)}}},[n("span",{staticClass:"button-state"},[n("img",{staticClass:"button-image",attrs:{src:t.imgSrc}})])])])},[],!1,null,"a840eff2",null).exports),z=n(366),N=n.n(z),R={name:"MeasureControl",props:["position"],mounted(){this.$leafletElement=this.createLeafletElement()},destroyed(){this.$leafletElement._map.removeControl(this.$leafletElement)},render(t){},methods:{createLeafletElement(){const{position:t}=this.$props;return new N.a({position:t,primaryLengthUnit:"feet",primaryAreaUnit:"sqfeet"})},parentMounted(t){t.$leafletElement.addControl(this.$leafletElement)}}},G=Object(f.a)(R,void 0,void 0,!1,null,null,null).exports;const{props:q,methods:U}=C.default;var W={name:"LegendControl",props:["position","options","items"],computed:{keys(){return Object.keys(this.$props.items)},activeTopic(){return this.$store.state.activeTopic},shouldShowImagery(){return this.$store.state.map.shouldShowImagery},shouldShowLegend(){let t=!0;return this.$props.options.topics.includes(this.activeTopic)||(t=!1),this.$props.options.showWithBaseMapOnly&&this.shouldShowImagery&&(t=!1),t}},methods:Object.assign(U)},V=(n(415),Object(f.a)(W,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:this.shouldShowLegend,expression:"this.shouldShowLegend"}]},[n("div",{staticClass:"legend"},[n("ul",{staticClass:"legend-list"},t._l(this.keys,function(e){return n("li",{staticClass:"legend-listitem",style:"font-size:"+t.items[e]["font-size"]+";"},[n("div",{staticClass:"legend-box",style:"background-color:"+t.items[e]["background-color"]+"; border-color:"+t.items[e]["border-color"]+"; border-style:"+t.items[e]["border-style"]+"; border-width:"+t.items[e]["border-weight"]+"; width:"+t.items[e].width+"; height:"+t.items[e].height+";"}),t._v(" "),n("div",{staticClass:"list-text"},[t._v("\n          "+t._s(e)+"\n        ")])])}),0)])])},[],!1,null,null,null).exports),H=n(324);var Z=function(){return"id-"+Math.random().toString(36).substring(7)},J={name:"MapAddressInput",props:["position","widthFromConfig","placeholder"],data:()=>({containerStyle:{width:"305px"},inputStyle:{width:"250px"},inputID:Z(),addressEntered:null}),created(){window.addEventListener("resize",this.handleWindowResize),this.handleWindowResize()},watch:{addressEntered(t){this.handleWindowResize()}},computed:{map(){return this.$store.state.map.map},inputWidth(){return""===this.addressEntered||null===this.addressEntered?this.$props.widthFromConfig-55:this.$props.widthFromConfig-108},inputClass(){return this.isMobileOrTablet?"pvm-input-mobile":"pvm-input-non-mobile"},containerClass(){return this.isMobileOrTablet?"pvm-container-mobile":"pvm-container-non-mobile"},buttonClass(){return this.isMobileOrTablet?"pvm-button-mobile":"pvm-button-non-mobile"},addressAutocompleteEnabled(){return!!this.$config.addressInput&&!0===this.$config.addressInput.autocompleteEnabled},isMobileOrTablet(){return this.$store.state.isMobileOrTablet}},methods:{createLeafletElement(t){return new class extends t.Control{constructor(t,e){super(e),this.el=t}onAdd(){const e=this.el;return t.DomEvent.disableClickPropagation(e),t.DomEvent.disableScrollPropagation(e),e}}(this.$el,{position:this.position})},parentMounted(t,e){const n=this.createLeafletElement(o);this.$leafletElement=n;const r=this.map;n.addTo(r)},didType:Object(H.a)(function(t){const{value:e}=t.target;if(this.$data.addressEntered=e,this.addressAutocompleteEnabled){if("ArrowDown"===t.key)return void document.getElementById("address-candidate-list-0").focus();this.getCandidates(e),"Enter"!==t.key&&this.$store.commit("setShouldShowAddressCandidateList",!0)}},300),getCandidates(t){h.a.get("https://cqvfg1pm72.execute-api.us-east-1.amazonaws.com/dev/first-api-test/",{params:{address:t}}).then(this.didGetCandidates).catch(this.didGetCandidatesError)},didGetCandidates(t){const{matches:e}=t.data,n=e.map(t=>t.address);this.$store.commit("setCandidates",n)},didGetCandidatesError(t){console.log("error getting candidates",t),this.$store.commit("setCandidates",[])},handleFormX(){console.log("handleFormX is running"),this.$data.addressEntered="",this.$store.commit("setShouldShowAddressCandidateList",!1),this.$store.commit("setCandidates",[])},handleSearchFormSubmit(){let t;console.log("handleSearchFormSubmit is running"),t=this.addressAutocompleteEnabled?addressEntered:document.querySelector("#"+this.$data.inputID.toString()).value,this.$controller.handleSearchFormSubmit(t)},handleWindowResize(){const t=this.addressEntered;window.innerWidth>=850?(this.containerStyle.width=this.$props.widthFromConfig+"px",this.inputStyle.width=""===t||null===t?this.$props.widthFromConfig-55+"px":this.$props.widthFromConfig-108+"px"):window.innerWidth>=750?(this.containerStyle.width=this.$props.widthFromConfig-100+"px",this.inputStyle.width=""===t||null===t?this.$props.widthFromConfig-155+"px":this.$props.widthFromConfig-208+"px"):(this.containerStyle.width="300px",this.inputStyle.width=""===t||null===t?"245px":"192px")}}},X=(n(417),Object(f.a)(J,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:"pvm-search-control-container "+this.containerClass,style:this.containerStyle},[n("form",{staticClass:"pvm-search-control-form",attrs:{autocomplete:"off",id:"search-form"},on:{submit:function(e){return e.preventDefault(),t.handleSearchFormSubmit(e)}}},[n("input",{class:"pvm-search-control-input "+this.inputClass,style:this.inputStyle,attrs:{id:t.inputID,placeholder:this.$props.placeholder||"Search the map",tabindex:"0"},domProps:{value:this.addressEntered},on:{keyup:t.didType}})]),t._v(" "),""!=this.addressEntered&&null!=this.addressEntered?n("button",{class:"pvm-search-control-button "+this.buttonClass,on:{click:t.handleFormX}},[n("font-awesome-icon",{attrs:{icon:"times"}})],1):t._e(),t._v(" "),n("button",{class:"pvm-search-control-button "+this.buttonClass,attrs:{name:"pvm-search-control-button",tabindex:"-1"},on:{click:this.handleSearchFormSubmit}},[n("font-awesome-icon",{attrs:{icon:"search"}})],1),t._v(" "),t._t("address-candidates-slot")],2)},[],!1,null,"3fdac0f0",null).exports);const Q=i.a.featureGroup,K=i.a.geoJSON,Y=i.a.marker;var tt={name:"MapPanel",mixins:[s,a,l],components:{Control:()=>Promise.resolve().then(n.bind(null,272)),MapAddressCandidateList:()=>n.e(27).then(n.bind(null,481)),EsriTiledMapLayer:()=>n.e(24).then(n.bind(null,499)),EsriTiledOverlay:()=>n.e(25).then(n.bind(null,479)),EsriDynamicMapLayer:()=>n.e(22).then(n.bind(null,478)),EsriFeatureLayer:()=>n.e(23).then(n.bind(null,500)),Geojson:()=>n.e(26).then(n.bind(null,501)),CircleMarker:()=>n.e(19).then(n.bind(null,507)),VectorMarker:()=>n.e(29).then(n.bind(null,502)),PngMarker:()=>n.e(28).then(n.bind(null,506)),CyclomediaRecordingCircle:()=>n.e(20).then(n.bind(null,470)),SvgViewConeMarker:()=>n.e(21).then(n.bind(null,485)),BasemapTooltip:()=>n.e(18).then(n.bind(null,484)),ControlCorner:g,FullScreenMapToggleTab:v,Map_:x,LocationControl:M,BasemapToggleControl:O,BasemapSelectControl:L,PictometryButton:A,CyclomediaButton:B,MeasureControl:G,LegendControl:V,MapAddressInput:X},data:()=>({zoomToShape:{geojsonParcels:[],geojsonForTopic:[],markersForAddress:[],markersForTopic:[]}}),beforeCreate(){console.log("MapPanel.vue beforeCreate this.$config:",this.$config)},created(){console.log("MapPanel.vue created this.$config:",this.$config);const t=this.$config.defaultAddress;t&&this.$controller.goToDefaultAddress(t),(this.$config.cyclomedia||{}).enabled&&(this.$cyclomediaRecordingsClient=new p(this.$config.cyclomedia.recordingsUrl,this.$config.cyclomedia.username,this.$config.cyclomedia.password,4326))},computed:{addressAutocompleteEnabled(){return!!this.$config.addressInput&&!0===this.$config.addressInput.autocompleteEnabled},addressInputPosition(){return this.isMobileOrTablet?"topleft":"topalmostleft"},addressInputWidth(){return this.$config.addressInput?this.$config.addressInput.mapWidth:415},addressInputPlaceholder(){return this.$config.addressInput?this.$config.addressInput.placeholder:null},basemapSelectControlPosition(){return this.isMobileOrTablet?"topright":"topalmostright"},shouldShowAddressCandidateList(){return this.$store.state.shouldShowAddressCandidateList},measureControlEnabled(){return!1!==this.$config.measureControlEnabled},fullScreenMapEnabled(){return this.$store.state.fullScreenMapEnabled},fullScreenTopicsEnabled(){return this.$store.state.fullScreenTopicsEnabled},mapPanelContainerClass(){return this.fullScreenMapEnabled?"medium-24 small-order-1 small-24 medium-order-2 mb-panel mb-panel-map":this.fullScreenMapOnly?"medium-1 small-order-1 small-1 medium-order-2 mb-panel mb-panel-map":this.fullScreenTopicsEnabled?"medium-1 small-order-1 small-24 medium-order-2 mb-panel mb-panel-map":"medium-12 small-order-1 small-24 medium-order-2 mb-panel mb-panel-map"},cycloLatlng(){if(null!==this.$store.state.cyclomedia.orientation.xyz){const t=this.$store.state.cyclomedia.orientation.xyz;return[t[1],t[0]]}return this.$config.map.center},cycloRotationAngle(){return 57.29577951307855*this.$store.state.cyclomedia.orientation.yaw},cycloHFov(){return this.$store.state.cyclomedia.orientation.hFov},isMobileOrTablet(){return this.$store.state.isMobileOrTablet},shouldShowCyclomediaButton(){return this.$config.cyclomedia.enabled&&!this.isMobileOrTablet},shouldShowPictometryButton(){return this.$config.pictometry.enabled&&!this.isMobileOrTablet},geolocationEnabled(){return!!this.$config.geolocation&&this.$config.geolocation.enabled},activeDorParcel(){return this.$store.state.parcels.dor.activeParcel},legendControls(){return this.$config.legendControls||{}},imageOverlay(){return this.$store.state.map.imageOverlay},imageOverlayItems(){if(this.activeTopicConfig.imageOverlayGroup){const t=this.activeTopicConfig.imageOverlayGroup,e=this.$store.state;return this.$config.imageOverlayGroups[t].items(e)}return[]},imageOverlayInfo(){return this.$config.map.dynamicMapLayers.regmaps},activeBasemap(){if(this.$store.state.map.shouldShowImagery)return this.$store.state.map.imagery;const t=this.$config.map.defaultBasemap;return this.$store.state.map.basemap||t},tiledLayers(){const t=this.activeBasemap;return this.configForBasemap(t).tiledLayers||[]},activeTiledOverlays(){return this.activeTopicConfig&&this.activeTopicConfig.tiledOverlays?this.activeTopicConfig.tiledOverlays:[]},activeDynamicMaps(){return this.activeTopicConfig&&this.activeTopicConfig.dynamicMapLayers?this.activeTopicConfig.dynamicMapLayers:[]},activeFeatureLayers(){return this.activeTopicConfig&&this.activeTopicConfig.featureLayers?this.activeTopicConfig.featureLayers:[]},activeFeature(){return this.$store.state.activeFeature},basemaps(){return Object.values(this.$config.map.basemaps)},imageryBasemaps(){return this.basemaps.filter(t=>"imagery"===t.type)},hasImageryBasemaps(){return this.imageryBasemaps.length>0},shouldShowImageryToggle(){return this.$config.map.imagery?this.hasImageryBasemaps&&this.$config.map.imagery.enabled:this.hasImageryBasemaps},identifyFeature(){let t;return"intersection"===this.geocodeType?t="address-marker":this.activeTopicConfig.identifyFeature?t=this.activeTopicConfig.identifyFeature:this.$config&&(t=this.$config.map.defaultIdentifyFeature),t},activeTopic(){return this.$store.state.activeTopic},activeTopicConfig(){const t=this.activeTopic;let e;return t&&(e=this.$config.topics.filter(e=>e.key===t)[0]),e||{}},activeParcelLayer(){return this.activeTopicConfig.parcels},dorParcels(){return this.$store.state.parcels.dor.data},pwdParcel(){return this.$store.state.parcels.pwd},geocodeResult(){return this.$store.state.geocode.data||{}},geocodeGeom(){return this.geocodeResult.geometry},geocodeType(){return this.geocodeResult.ais_feature_type},streetAddress(){return this.geocodeResult.properties.street_address},picOrCycloActive(){return!(!this.cyclomediaActive&&!this.pictometryActive)},mapBounds(){},boundsBasedOnShape(){return this.$store.state.map.boundsBasedOnShape},isGeocoding(){return"waiting"===this.$store.state.geocode.status}},watch:{picOrCycloActive(t){this.$nextTick(()=>{this.$store.state.map.map.invalidateSize()})},geojsonForTopic(t){let e=this.activeTopicConfig.zoomToShape,n=this.$data.zoomToShape;e&&e.includes("geojsonForTopic")?(n.geojsonForTopic=t,this.checkBoundsChanges()):n.geojsonForTopic=[]},geojsonParcels(t){let e=this.activeTopicConfig.zoomToShape,n=this.$data.zoomToShape;e&&e.includes("geojsonParcels")?(n.geojsonParcels=t,this.checkBoundsChanges()):n.geojsonParcels=[]},markersForAddress(t){let e=this.activeTopicConfig.zoomToShape,n=this.$data.zoomToShape;e&&e.includes("markersForAddress")?(n.markersForAddress=t,this.checkBoundsChanges()):n.markersForAddress=[]},markersForTopic(t){let e=this.activeTopicConfig.zoomToShape,n=this.$data.zoomToShape;e&&e.includes("markersForTopic")?(n.markersForTopic=t,this.checkBoundsChanges()):n.markersForTopic=[]},fullScreenTopicsEnabled(){this.$nextTick(()=>{this.$store.state.map.map.invalidateSize()})}},methods:{checkBoundsChanges(){let t=this.activeTopicConfig.zoomToShape;if(!t)return;let e=this.$data.zoomToShape,n=[];for(let r of t)!1!==e[r]&&e[r].length>0?n.push(!0):n.push(!1);n.includes(!1)||this.setMapToBounds()},setMapToBounds(){let t=[],e=this.activeTopicConfig.zoomToShape;if(e){if(e.includes("geojsonParcels"))for(let e of this.geojsonParcels)t.push(K(e.geojson));if(e.includes("geojsonForTopic"))for(let e of this.geojsonForTopic)t.push(K(e.geojson));if(e.includes("markersForAddress"))for(let e of this.markersForAddress)t.push(Y(e.latlng));if(e.includes("markersForTopic"))for(let e of this.markersForTopic)t.push(Y(e.latlng));const n=new Q(t).getBounds();this.$store.commit("setMapBounds",n)}},configForBasemap(t){return this.$config.map.basemaps[t]||{}},shouldShowGeojson(t){return"pwd"===this.activeTopicConfig.basemap||t===this.activeDorParcel},shouldShowImageOverlay(t){return t===this.imageOverlay},shouldShowFeatureLayer(t){return!!this.activeFeatureLayers.includes(t)},handleMapClick(t){this.$controller.handleMapClick(t)},handleMapMove(t){const e=this.$store.state.map.map,n=this.$config.pictometry||{},r=e.getCenter(),{lat:o,lng:i}=r,s=[i,o];if(n.enabled){this.$store.commit("setPictometryMapCenter",s);const t=e.getZoom();this.$store.commit("setPictometryMapZoom",t)}(this.$config.cyclomedia||{}).enabled&&(this.updateCyclomediaRecordings(),this.$store.commit("setCyclomediaLatLngFromMap",[o,i]))},fillColorForOverlayMarker(t,e){const n=this.getConfigForTable(e).options.mapOverlay,{style:r,hoverStyle:o}=n,i=this.activeFeature;return(t===i.featureId&&e===i.tableId?o:r).fillColor}}},et=Object(f.a)(tt,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:this.mapPanelContainerClass,attrs:{id:"map-panel-container"}},[t._m(0),t._v(" "),n("map_",{class:{"mb-map-with-widget":this.$store.state.cyclomedia.active||this.$store.state.pictometry.active},attrs:{id:"map-tag",center:this.$store.state.map.center,zoom:this.$store.state.map.zoom,"zoom-control-position":"bottomright","min-zoom":this.$config.map.minZoom,"max-zoom":this.$config.map.maxZoom},on:{"l-click":t.handleMapClick,"l-moveend":t.handleMapMove}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isGeocoding,expression:"isGeocoding"}],staticClass:"mb-map-loading-mask"},[n("div",{staticClass:"mb-map-loading-mask-inner"},[n("i",{staticClass:"fa fa-spinner fa-4x spin"}),t._v(" "),n("h1",[t._v("Finding address...")])])]),t._v(" "),t._l(this.$config.map.basemaps,function(e,r){return t.activeBasemap===r?n("esri-tiled-map-layer",{key:r,attrs:{url:e.url,"max-zoom":e.maxZoom,attribution:e.attribution}}):t._e()}),t._v(" "),t._l(this.$config.map.tiledLayers,function(e,r){return t.tiledLayers.includes(r)?n("esri-tiled-map-layer",{key:r,attrs:{url:e.url,zIndex:e.zIndex,attribution:e.attribution}}):t._e()}),t._v(" "),t._l(this.$config.map.tiledOverlays,function(e,r){return t.activeTiledOverlays.includes(r)?n("esri-tiled-overlay",{key:r,attrs:{url:e.url,zIndex:e.zIndex,opacity:e.opacity}}):t._e()}),t._v(" "),t._l(this.$config.map.dynamicMapLayers,function(e,r){return t.activeDynamicMaps.includes(r)?n("esri-dynamic-map-layer",{key:r,attrs:{url:e.url,attribution:e.attribution,transparent:!0,opacity:e.opacity}}):t._e()}),t._v(" "),t._l(this.$config.map.featureLayers,function(e,r){return t.shouldShowFeatureLayer(r,e.minZoom)?n("esri-feature-layer",{key:r,attrs:{layerName:r,url:e.url,color:e.color,fillColor:e.color,fillOpacity:e.fillOpacity,weight:e.weight,style_:e.style,minZoom:e.minZoom,maxZoom:e.maxZoom,zIndex:e.zIndex,markerType:e.markerType,radius:e.radius,interactive:e.interactive}}):t._e()}),t._v(" "),t._l(this.imageOverlayItems,function(e,r){return t.shouldShowImageOverlay(e.properties.RECMAP)?n("esri-dynamic-map-layer",{key:r,attrs:{url:"//gis.phila.gov/arcgis/rest/services/Atlas/RegMaps/MapServer",layers:[0],layerDefs:"0:NAME='g"+e.properties.RECMAP.toLowerCase()+".tif'",transparent:!0,opacity:.5}}):t._e()}),t._v(" "),t._l(t.markersForAddress,function(t,e){return n("vector-marker",{key:t.key,attrs:{latlng:t.latlng,markerColor:t.color,icon:t.icon}})}),t._v(" "),t._l(t.markersForTopic,function(t,e){return n("vector-marker",{key:t.key,attrs:{latlng:t.latlng,markerColor:t.color,icon:t.icon}})}),t._v(" "),this.cyclomediaActive?n("png-marker",{attrs:{icon:"images/camera.png",latlng:t.cycloLatlng,rotationAngle:t.cycloRotationAngle}}):t._e(),t._v(" "),this.cyclomediaActive?n("svg-view-cone-marker",{attrs:{latlng:t.cycloLatlng,rotationAngle:t.cycloRotationAngle,hFov:t.cycloHFov}}):t._e(),t._v(" "),t._l(t.geojsonParcels,function(e){return t.shouldShowGeojson(e.key)?n("geojson",{key:e.key,attrs:{geojson:e.geojson,fillColor:e.fillColor,color:e.color,weight:e.weight,opacity:e.opacity,fillOpacity:e.fillOpacity,data:{featureId:e.featureId,tableId:e.tableId}}}):t._e()}),t._v(" "),t._l(t.geojsonForTopic,function(e){return t.shouldShowGeojson(e.key)?n("geojson",{key:e.key,attrs:{geojson:e.geojson,fillColor:e.fillColor,color:e.color,weight:e.weight,opacity:e.opacity,fillOpacity:e.fillOpacity,data:{featureId:e.featureId,tableId:e.tableId}}}):t._e()}),t._v(" "),t._l(t.reactiveGeojsonFeatures,function(e){return t.shouldShowGeojson(e.key)?n("geojson",{key:e.key,attrs:{geojson:e.geojson,fillColor:e.fillColor,color:e.color,weight:e.weight,opacity:e.opacity,fillOpacity:e.fillOpacity,data:{featureId:e.featureId,tableId:e.tableId}},on:{"l-mouseover":t.handleMarkerMouseover,"l-click":t.handleMarkerClick,"l-mouseout":t.handleMarkerMouseout}}):t._e()}),t._v(" "),null!=this.$store.state.map.location.lat?n("circle-marker",{key:Math.random(),attrs:{latlng:this.locationMarker.latlng,radius:this.locationMarker.radius,fillColor:this.locationMarker.fillColor,color:this.locationMarker.color,weight:this.locationMarker.weight,opacity:this.locationMarker.opacity,fillOpacity:this.locationMarker.fillOpacity}}):t._e(),t._v(" "),t._l(t.reactiveCircleMarkers,function(e){return n("circle-marker",{key:Math.random(),attrs:{latlng:e.latlng,radius:e.radius,fillColor:e.fillColor,color:e.color,weight:e.weight,opacity:e.opacity,fillOpacity:e.fillOpacity,data:{featureId:e.featureId,tableId:e.tableId}},on:{"l-mouseover":t.handleMarkerMouseover,"l-click":t.handleMarkerClick,"l-mouseout":t.handleMarkerMouseout}})}),t._v(" "),n("control-corner",{attrs:{vSide:"top",hSide:"almostright"}}),t._v(" "),n("control-corner",{attrs:{vSide:"top",hSide:"almostleft"}}),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(5),t._v(" "),t._m(7),t._v(" "),this.measureControlEnabled?t._m(8):t._e(),t._v(" "),t._m(9),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),this.addressAutocompleteEnabled?n("map-address-candidate-list",{attrs:{position:this.addressInputPosition,widthFromConfig:this.addressInputWidth}}):t._e(),t._v(" "),t._l(t.cyclomediaRecordings,function(e){return t.cyclomediaActive?n("cyclomedia-recording-circle",{key:e.imageId,attrs:{imageId:e.imageId,latlng:[e.lat,e.lng],size:1.2,color:"#3388ff",weight:1},on:{"l-click":t.handleCyclomediaRecordingClick}}):t._e()})],2),t._v(" "),t._t("cycloWidget"),t._v(" "),t._t("pictWidget")],2)},r,!1,null,"5c7e30a2",null);e.default=et.exports}])]);