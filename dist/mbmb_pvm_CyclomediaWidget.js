(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{283:function(e,t,o){var i=o(350);"string"==typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};o(17)(i,a);i.locals&&(e.exports=i.locals)},349:function(e,t,o){"use strict";var i=o(283);o.n(i).a},350:function(e,t,o){(e.exports=o(16)(!1)).push([e.i,"\n#cyclo-container {\r\n  padding: 0px;\r\n  height: 50%;\r\n  display: none;\n}\n@media screen and (min-width: 46.875em) {\n#cyclo-container {\r\n    display: block;\n}\n}\n#inCycloDiv {\r\n  /* position: absolute; */\r\n  position: absolute;\r\n  /* top: 0px; */\r\n  right: 0px;\r\n  /* float: right; */\r\n  background-color: white;\r\n  border: 0px solid;\r\n  width: 30px;\r\n  height: 30px;\r\n  cursor:pointer;\r\n  z-index: 10;\n}\n.popout-icon {\r\n  margin-top: 8.5px;\r\n  font-size: 15px;\r\n  margin-left: 8.5px;\n}\n.panoramaViewerWindow {\r\n  display: block;\r\n  width: 100%;\r\n  height:100%;\n}\n@media screen and (max-width: 46.875em) {\n.cyclo-container {\r\n    display: none;\n}\n}\r\n\r\n",""])},486:function(e,t,o){"use strict";o.r(t);var i=o(105),a={name:"CyclomediaWidget",data:()=>({docWidth:0,divWidth:0,popoutPosition:0}),props:["screenPercent"],computed:{isMobileOrTablet(){return this.$store.state.isMobileOrTablet},fullScreenMapEnabled(){return this.$store.state.fullScreenMapEnabled},popoutAble(){let e;return e=!1!==this.$config.cyclomedia.popoutAble},cyclomediaInitialized(){return this.$store.state.cyclomedia.initialized},cyclomediaActive(){return this.$store.state.cyclomedia.active},pictometryActive(){return this.$store.state.pictometry.active},cycloContainerClass(){return this.pictometryActive?"medium-16 large-16 columns mb-panel":"medium-24 large-24 columns mb-panel"},locForCyclo(){const e=this.$store.state.geocode.data;this.$store.state.map.map;if(e)return[e.geometry.coordinates[1],e.geometry.coordinates[0]]},latLngFromMap(){return this.$store.state.cyclomedia.latLngFromMap},mapCenter(){return this.$store.state.map.center},navBarOpen(){return this.$store.state.cyclomedia.navBarOpen},projection4326:()=>"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs",projection2272:()=>"+proj=lcc +lat_1=40.96666666666667 +lat_2=39.93333333333333 +lat_0=39.33333333333334 +lon_0=-77.75 +x_0=600000 +y_0=0 +ellps=GRS80 +datum=NAD83 +to_meter=0.3048006096012192 +no_defs"},watch:{fullScreenMapEnabled(){this.setDivWidth()},locForCyclo(e){e&&this.setNewLocation(e)},latLngFromMap(e){this.cyclomediaInitialized&&(Array.isArray(e)?this.setNewLocation([e[1],e[0]]):this.setNewLocation([e.lat,e.lng]))},cyclomediaInitialized(){StreetSmartApi.init({targetElement:this.$refs.cycloviewer,username:this.$config.cyclomedia.username,password:this.$config.cyclomedia.password,apiKey:this.$config.cyclomedia.apiKey,srs:"EPSG:2272",locale:"en-us",addressSettings:{locale:"en-us",database:"CMDatabase"}}).then(()=>{const e=this.$store.state.cyclomedia.latLngFromMap;this.setNewLocation([e[0],e[1]])},e=>{}),window.addEventListener("resize",this.setDivWidth)},cyclomediaActive(e){this.setDivWidth(),!0===e&&this.setNewLocation(this.latLngFromMap)}},updated(){this.cyclomediaActive&&window.panoramaViewer&&window.panoramaViewer.rotateRight(1e-7),this.setDivWidth()},methods:{setDivWidth(){const e=document.body.clientWidth;this.docWidth=e;const t=document.getElementById("cyclo-container"),o=window.getComputedStyle(t),i=parseFloat(o.getPropertyValue("width").replace("px",""));let a;this.divWidth=i,a=this.fullScreenMapEnabled?e-i+"px":e-(e/this.$props.screenPercent+i)+"px",this.popoutPosition=a},setNewLocation(e){const t=StreetSmartApi.ViewerType.PANORAMA,o=Object(i.default)(this.projection4326,this.projection2272,[e[1],e[0]]);StreetSmartApi.open(o[0]+","+o[1],{viewerType:t,srs:"EPSG:2272",panoramaViewer:{closable:!1,maximizable:!1}}).then(function(e){const t=this;if(e){for(let t=0;t<e.length;t++)e[t].getType()===StreetSmartApi.ViewerType.PANORAMA&&(window.panoramaViewer=e[t]);t.sendOrientationToStore(),window.panoramaViewer.toggleNavbarExpanded(t.navBarOpen),window.panoramaViewer.toggleButtonEnabled("panorama.elevation",!1),window.panoramaViewer.toggleButtonEnabled("panorama.reportBlurring",!1);for(let e of window.panoramaViewer.props.overlays)"surfaceCursorLayer"===e.id&&!0===e.visible&&window.panoramaViewer.toggleOverlay(e);this.$config.cyclomedia.measurementAllowed&&"false"!==this.$config.cyclomedia.measurementAllowed||(StreetSmartApi.removeOverlay("measurementLayer"),window.panoramaViewer.toggleButtonEnabled("panorama.measure",!1)),window.panoramaViewer.on("VIEW_CHANGE",function(){window.panoramaViewer.props.orientation.yaw!==t.$store.state.cyclomedia.orientation.yaw||window.panoramaViewer.props.orientation.xyz!==t.$store.state.cyclomedia.orientation.xyz?t.sendOrientationToStore():window.panoramaViewer.getNavbarExpanded()!==this.navBarOpen&&t.$store.commit("setCyclomediaNavBarOpen",window.panoramaViewer.getNavbarExpanded())}),window.panoramaViewer.on("VIEW_LOAD_END",function(){window.panoramaViewer.props.orientation.yaw!==t.$store.state.cyclomedia.orientation.yaw||window.panoramaViewer.props.orientation.xyz!==t.$store.state.cyclomedia.orientation.xyz?t.sendOrientationToStore():window.panoramaViewer.getNavbarExpanded()!==this.navBarOpen&&t.$store.commit("setCyclomediaNavBarOpen",window.panoramaViewer.getNavbarExpanded())})}}.bind(this)).catch(function(e){})},sendOrientationToStore(){this.$store.commit("setCyclomediaYaw",window.panoramaViewer.props.orientation.yaw),this.$store.commit("setCyclomediaHFov",window.panoramaViewer.props.orientation.hFov);const e=[window.panoramaViewer.props.orientation.xyz[0],window.panoramaViewer.props.orientation.xyz[1]],t=Object(i.default)(this.projection2272,this.projection4326,e);this.$store.commit("setCyclomediaXyz",t)},popoutClicked(){const e=this.$store.state.map.map.getCenter();window.open("//cyclomedia.phila.gov/?"+e.lat+"&"+e.lng,"_blank"),this.$store.commit("setCyclomediaActive",!1)}}},n=(o(349),o(37)),r=Object(n.a)(a,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{class:this.cycloContainerClass,attrs:{id:"cyclo-container"}},[!1===this.isMobileOrTablet&&!0===this.popoutAble?t("div",{style:{right:this.popoutPosition},attrs:{id:"inCycloDiv"},on:{click:this.popoutClicked}},[t("font-awesome-icon",{staticClass:"popout-icon",attrs:{icon:"external-link"}})],1):this._e(),this._v(" "),t("div",{ref:"cycloviewer",staticClass:"panoramaViewerWindow",attrs:{id:"cycloviewer"}})])},[],!1,null,null,null);t.default=r.exports}}]);